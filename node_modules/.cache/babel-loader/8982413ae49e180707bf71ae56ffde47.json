{"remainingRequest":"D:\\project\\softwareDevelopment\\IM-Web\\node_modules\\babel-loader\\lib\\index.js!D:\\project\\softwareDevelopment\\IM-Web\\node_modules\\cache-loader\\dist\\cjs.js??ref--0-0!D:\\project\\softwareDevelopment\\IM-Web\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!D:\\project\\softwareDevelopment\\IM-Web\\src\\components\\message\\message-elements\\custom-element.vue?vue&type=script&lang=js&","dependencies":[{"path":"D:\\project\\softwareDevelopment\\IM-Web\\src\\components\\message\\message-elements\\custom-element.vue","mtime":1649851412192},{"path":"D:\\project\\softwareDevelopment\\IM-Web\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1649851454799},{"path":"D:\\project\\softwareDevelopment\\IM-Web\\node_modules\\babel-loader\\lib\\index.js","mtime":1649851455045},{"path":"D:\\project\\softwareDevelopment\\IM-Web\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1649851454799},{"path":"D:\\project\\softwareDevelopment\\IM-Web\\node_modules\\vue-loader\\lib\\index.js","mtime":1649851455309},{"path":"D:\\project\\softwareDevelopment\\IM-Web\\babel.config.js","mtime":1649851550121},{"path":"D:\\project\\softwareDevelopment\\IM-Web\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1649851454799},{"path":"D:\\project\\softwareDevelopment\\IM-Web\\node_modules\\babel-loader\\lib\\index.js","mtime":1649851455045},{"path":"D:\\project\\softwareDevelopment\\IM-Web\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1649851454799},{"path":"D:\\project\\softwareDevelopment\\IM-Web\\node_modules\\vue-loader\\lib\\index.js","mtime":1649851455309}],"contextDependencies":[],"result":["import \"core-js/modules/es7.object.get-own-property-descriptors\";\nimport \"core-js/modules/web.dom.iterable\";\nimport \"core-js/modules/es6.object.keys\";\nimport \"core-js/modules/es6.regexp.to-string\";\nimport _defineProperty from \"D:/project/softwareDevelopment/IM-Web/node_modules/@babel/runtime/helpers/esm/defineProperty.js\";\nimport _Rate2 from \"element-ui/lib/theme-chalk/rate.css\";\nimport \"element-ui/lib/theme-chalk/base.css\";\nimport _Rate from \"element-ui/lib/rate\";\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); enumerableOnly && (symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; })), keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = null != arguments[i] ? arguments[i] : {}; i % 2 ? ownKeys(Object(source), !0).forEach(function (key) { _defineProperty(target, key, source[key]); }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)) : ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } return target; }\n\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\nimport { mapState } from 'vuex';\nimport MessageBubble from \"../message-bubble\";\nimport MessageGroupLiveStatus from \"../message-group-live-status\";\nexport default {\n  name: 'CustomElement',\n  props: {\n    payload: {\n      type: Object,\n      required: true\n    },\n    message: {\n      type: Object,\n      required: true\n    },\n    isMine: {\n      type: Boolean\n    }\n  },\n  components: {\n    MessageBubble: MessageBubble,\n    ElRate: _Rate,\n    MessageGroupLiveStatus: MessageGroupLiveStatus\n  },\n  computed: _objectSpread(_objectSpread({}, mapState({\n    currentUserProfile: function currentUserProfile(state) {\n      return state.user.currentUserProfile;\n    }\n  })), {}, {\n    text: function text() {\n      return this.translateCustomMessage(this.payload);\n    },\n    rate: function rate() {\n      return parseInt(this.payload.description);\n    }\n  }),\n  methods: {\n    translateCustomMessage: function translateCustomMessage(payload) {\n      var videoPayload = {};\n\n      try {\n        videoPayload = JSON.parse(payload.data);\n      } catch (e) {\n        videoPayload = {};\n      }\n\n      if (payload.data === 'group_create') {\n        return \"\".concat(payload.extension);\n      }\n\n      if (videoPayload.roomId) {\n        videoPayload.roomId = videoPayload.roomId.toString();\n        videoPayload.isFromGroupLive = 1;\n        return videoPayload;\n      }\n\n      if (payload.text) {\n        return payload.text;\n      } else {\n        return '[自定义消息]';\n      }\n    }\n  }\n};",{"version":3,"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAyBA;AACA;AAEA;AAEA;AACAA,uBADA;AAEAC;AACAC;AACAC,kBADA;AAEAC;AAFA,KADA;AAKAC;AACAF,kBADA;AAEAC;AAFA,KALA;AASAE;AACAH;AADA;AATA,GAFA;AAeAI;AACAC,gCADA;AAEAC,iBAFA;AAGAC;AAHA,GAfA;AAoBAC,4CACAC;AACAC;AAAA;AAAA;AADA,IADA;AAIAC,QAJA,kBAIA;AACA;AACA,KANA;AAOAC,QAPA,kBAOA;AACA;AACA;AATA,IApBA;AA+BAC;AACAC,0BADA,kCACAf,OADA,EACA;AACA;;AACA;AACAgB;AACA,OAFA,CAEA;AACAA;AACA;;AACA;AACA;AACA;;AACA;AACAA;AACAA;AACA;AACA;;AACA;AACA;AACA,OAFA,MAEA;AACA;AACA;AACA;AArBA;AA/BA","names":["name","props","payload","type","required","message","isMine","components","MessageBubble","ElRate","MessageGroupLiveStatus","computed","mapState","currentUserProfile","text","rate","methods","translateCustomMessage","videoPayload"],"sourceRoot":"src/components/message/message-elements","sources":["custom-element.vue"],"sourcesContent":["<template>\r\n<message-bubble :isMine=isMine :message=message>\r\n  <div class=\"custom-element-wrapper\">\r\n    <div class=\"survey\"  v-if=\"this.payload.data === 'survey'\">\r\n      <div class=\"title\">对IM DEMO的评分和建议</div>\r\n      <el-rate\r\n          v-model=\"rate\"\r\n          disabled\r\n          show-score\r\n          text-color=\"#ff9900\"\r\n          score-template=\"{value}\">\r\n      </el-rate>\r\n      <div class=\"suggestion\">{{this.payload.extension}}</div>\r\n    </div>\r\n    <span class=\"text\" title=\"您可以自行解析自定义消息\" v-else>\r\n      <template v-if=\"text.isFromGroupLive && text.isFromGroupLive === 1\">\r\n        <message-group-live-status :liveInfo='text' />\r\n      </template>\r\n      <template v-else>{{text}}</template>\r\n    </span>\r\n  </div>\r\n</message-bubble>\r\n</template>\r\n\r\n<script>\r\nimport { mapState } from 'vuex'\r\nimport MessageBubble from '../message-bubble'\r\nimport { Rate } from 'element-ui'\r\nimport MessageGroupLiveStatus from '../message-group-live-status'\r\n\r\nexport default {\r\n  name: 'CustomElement',\r\n  props: {\r\n    payload: {\r\n      type: Object,\r\n      required: true\r\n    },\r\n    message: {\r\n      type: Object,\r\n      required: true\r\n    },\r\n    isMine: {\r\n      type: Boolean\r\n    }\r\n  },\r\n  components: {\r\n    MessageBubble,\r\n    ElRate: Rate,\r\n    MessageGroupLiveStatus\r\n  },\r\n  computed: {\r\n    ...mapState({\r\n      currentUserProfile: state => state.user.currentUserProfile\r\n    }),\r\n    text() {\r\n      return this.translateCustomMessage(this.payload)\r\n    },\r\n    rate() {\r\n      return parseInt(this.payload.description)\r\n    }\r\n  },\r\n  methods: {\r\n    translateCustomMessage(payload) {\r\n      let videoPayload = {}\r\n      try{\r\n        videoPayload = JSON.parse(payload.data)\r\n      } catch(e) {\r\n        videoPayload = {}\r\n      }\r\n      if (payload.data === 'group_create') {\r\n        return `${payload.extension}`\r\n      }\r\n      if (videoPayload.roomId) {\r\n        videoPayload.roomId = videoPayload.roomId.toString()\r\n        videoPayload.isFromGroupLive = 1\r\n        return videoPayload\r\n      }\r\n      if(payload.text) {\r\n        return payload.text\r\n      }else{\r\n        return '[自定义消息]'\r\n      }\r\n    }\r\n  }\r\n}\r\n</script>\r\n\r\n<style lang=\"stylus\" scoped>\r\n.text\r\n  font-weight bold\r\n.title\r\n  font-size 16px\r\n  font-weight 600\r\n  padding-bottom 10px\r\n.survey\r\n  background-color white\r\n  color black\r\n  padding 20px\r\n  display flex\r\n  flex-direction column\r\n.suggestion\r\n  padding-top 10px\r\n  font-size 14px\r\n</style>\r\n"]}]}