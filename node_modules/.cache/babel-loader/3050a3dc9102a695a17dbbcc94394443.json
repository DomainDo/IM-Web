{"remainingRequest":"D:\\project\\softwareDevelopment\\IM-Web\\node_modules\\babel-loader\\lib\\index.js!D:\\project\\softwareDevelopment\\IM-Web\\node_modules\\cache-loader\\dist\\cjs.js??ref--0-0!D:\\project\\softwareDevelopment\\IM-Web\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!D:\\project\\softwareDevelopment\\IM-Web\\src\\views\\admin\\helper.vue?vue&type=script&lang=js&","dependencies":[{"path":"D:\\project\\softwareDevelopment\\IM-Web\\src\\views\\admin\\helper.vue","mtime":1649755065402},{"path":"D:\\project\\softwareDevelopment\\IM-Web\\babel.config.js","mtime":1649851550121},{"path":"D:\\project\\softwareDevelopment\\IM-Web\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1649851454799},{"path":"D:\\project\\softwareDevelopment\\IM-Web\\node_modules\\babel-loader\\lib\\index.js","mtime":1649851455045},{"path":"D:\\project\\softwareDevelopment\\IM-Web\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1649851454799},{"path":"D:\\project\\softwareDevelopment\\IM-Web\\node_modules\\vue-loader\\lib\\index.js","mtime":1649851455309}],"contextDependencies":[],"result":["import \"core-js/modules/es6.regexp.split\";\nimport \"core-js/modules/es6.regexp.to-string\";\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\nexport default {\n  data: function data() {\n    var _this = this;\n\n    var validateTrue_name = function validateTrue_name(rule, value, callback) {\n      if (!value) {\n        return callback(new Error('用户名不能为空'));\n      } else {\n        if (value.length < 2 || value.length > 32) {\n          callback(new Error(\"长度限制为2~32个字符\"));\n        } else {\n          if (!_this.checkSpecialKey(value)) {\n            callback(new Error(\"不能含有特殊字符！！\"));\n          } else {\n            callback();\n          }\n        }\n      }\n    };\n\n    var validateGender = function validateGender(rule, value, callback) {\n      if (!value) {\n        callback(new Error(\"请选择性别\"));\n      } else {\n        callback();\n      }\n    };\n\n    var validateAge = function validateAge(rule, value, callback) {\n      if (!value) {\n        callback(new Error(\"年龄不能为空\"));\n      } else {\n        var regular = /^[+]{0,1}(\\d+)$/;\n\n        if (regular.test(value)) {\n          callback();\n        } else {\n          callback(new Error(\"请输入大于等于0的正整数\"));\n        }\n      }\n    };\n\n    var validateConsultant = function validateConsultant(rule, value, callback) {\n      if (!value) {\n        callback(new Error(\"请选择绑定的咨询师\"));\n      } else {\n        callback();\n      }\n    };\n\n    var validatePhone = function validatePhone(rule, value, callback) {\n      if (!value) {\n        callback(new Error(\"手机号不能为空\"));\n      } else {\n        if (/^1[34578]\\d{9}$/.test(value) == false) {\n          callback(new Error(\"手机号格式错误\"));\n        } else {\n          callback();\n        }\n      }\n    };\n\n    var validateIDnumber = function validateIDnumber(rule, value, callback) {\n      if (!value) {\n        callback(new Error(\"身份证不能为空\"));\n      } else {\n        var regular = /^(^[1-9]\\d{7}((0\\d)|(1[0-2]))(([0|1|2]\\d)|3[0-1])\\d{3}$)|(^[1-9]\\d{5}[1-9]\\d{3}((0\\d)|(1[0-2]))(([0|1|2]\\d)|3[0-1])((\\d{4})|\\d{3}[X])$)$/;\n\n        if (regular.test(value)) {\n          callback();\n        } else {\n          callback(new Error('请填写正确的身份证号码'));\n        }\n      }\n    };\n\n    var validateEmail = function validateEmail(rule, value, callback) {\n      if (value === '') {\n        callback(new Error('请正确填写邮箱'));\n      } else {\n        if (value !== '') {\n          var reg = /^[A-Za-z0-9\\u4e00-\\u9fa5]+@[a-zA-Z0-9_-]+(\\.[a-zA-Z0-9_-]+)+$/;\n\n          if (!reg.test(value)) {\n            callback(new Error('请输入有效的邮箱'));\n          }\n        }\n\n        callback();\n      }\n    };\n\n    var validateUsername = function validateUsername(rule, value, callback) {\n      if (!value) {\n        return callback(new Error('用户名不能为空'));\n      } else {\n        var regular = /^[a-zA-Z0-9_]/;\n\n        if (regular.test(value)) {\n          callback();\n        } else {\n          callback(new Error(\"用户名只包含英文字母和下划线\"));\n        }\n      }\n    };\n\n    var validatePassword = function validatePassword(rule, value, callback) {\n      if (!value) {\n        return callback(new Error('密码不能为空'));\n      } else {\n        if (value.length < 6) {\n          return callback(new Error('输入密码不小于6位'));\n        } else {\n          callback();\n        }\n      }\n    };\n\n    var validateWork = function validateWork(rule, value, callback) {\n      if (!value) {\n        return callback(new Error('工作单位不能为空'));\n      } else {\n        callback();\n      }\n    };\n\n    var validateTitle = function validateTitle(rule, value, callback) {\n      if (!value) {\n        return callback(new Error('职称不能为空'));\n      } else {\n        callback();\n      }\n    };\n\n    var validateQualificaton = function validateQualificaton(rule, value, callback) {\n      if (!value) {\n        return callback(new Error('督导资质不能为空'));\n      } else {\n        callback();\n      }\n    };\n\n    var validateQualificatonId = function validateQualificatonId(rule, value, callback) {\n      if (!value) {\n        return callback(new Error('资质编号不能为空'));\n      } else {\n        callback();\n      }\n    };\n\n    return {\n      dialogFormVisible: false,\n      dialogFormVisible1: false,\n      dialogFormVisible2: false,\n      form_add: {\n        true_name: '',\n        gender: '',\n        age: '',\n        id_number: '',\n        phone: '',\n        email: '',\n        consultant: '',\n        username: '',\n        password: '',\n        work: '',\n        title: '',\n        qualification: '',\n        qualificationId: ''\n      },\n      form_change: {\n        trueName: '',\n        gender: '',\n        age: '',\n        idNumber: '',\n        phone: '',\n        email: '',\n        username: '',\n        password: '',\n        work: '',\n        title: '',\n        qualification: '',\n        qualificationId: '',\n        bindID: '',\n        available: '',\n        id: '',\n        state: '',\n        level: '',\n        schedule: '',\n        role: '',\n        workingTimes: '',\n        totalTime: ''\n      },\n      form_schedule: {\n        trueName: '',\n        gender: '',\n        age: '',\n        idNumber: '',\n        phone: '',\n        email: '',\n        username: '',\n        password: '',\n        work: '',\n        title: '',\n        qualification: '',\n        qualificationId: '',\n        bindID: '',\n        available: '',\n        id: '',\n        state: '',\n        level: '',\n        schedule: '',\n        role: '',\n        workingTimes: '',\n        totalTime: ''\n      },\n      schedule_week: [],\n      weeks: ['周一', '周二', '周三', '周四', '周五', '周六', '周日'],\n      rules_add: {\n        true_name: [{\n          validator: validateTrue_name,\n          trigger: 'blur'\n        }],\n        gender: [{\n          validator: validateGender,\n          trigger: 'blur'\n        }],\n        age: [{\n          validator: validateAge,\n          trigger: 'blur'\n        }],\n        phone: [{\n          validator: validatePhone,\n          trigger: 'blur'\n        }],\n        id_number: [{\n          validator: validateIDnumber,\n          trigger: 'blur'\n        }],\n        email: [{\n          validator: validateEmail,\n          trigger: 'blur'\n        }],\n        consultant: [{\n          validator: validateConsultant,\n          trigger: 'blur'\n        }],\n        username: [{\n          validator: validateUsername,\n          trigger: 'blur'\n        }],\n        password: [{\n          validator: validatePassword,\n          trigger: 'blur'\n        }],\n        work: [{\n          validator: validateWork,\n          trigger: 'blur'\n        }],\n        title: [{\n          validator: validateTitle,\n          trigger: 'blur'\n        }],\n        qualification: [{\n          validator: validateQualificaton,\n          trigger: 'blur'\n        }],\n        qualificationId: [{\n          validator: validateQualificatonId,\n          trigger: 'blur'\n        }]\n      },\n      rules_change: {\n        trueName: [{\n          validator: validateTrue_name,\n          trigger: 'blur'\n        }],\n        gender: [{\n          validator: validateGender,\n          trigger: 'blur'\n        }],\n        age: [{\n          validator: validateAge,\n          trigger: 'blur'\n        }],\n        phone: [{\n          validator: validatePhone,\n          trigger: 'blur'\n        }],\n        idNumber: [{\n          validator: validateIDnumber,\n          trigger: 'blur'\n        }],\n        email: [{\n          validator: validateEmail,\n          trigger: 'blur'\n        }],\n        bindID: [{\n          validator: validateConsultant,\n          trigger: 'blur'\n        }],\n        username: [{\n          validator: validateUsername,\n          trigger: 'blur'\n        }],\n        password: [{\n          validator: validatePassword,\n          trigger: 'blur'\n        }],\n        work: [{\n          validator: validateWork,\n          trigger: 'blur'\n        }],\n        title: [{\n          validator: validateTitle,\n          trigger: 'blur'\n        }],\n        qualification: [{\n          validator: validateQualificaton,\n          trigger: 'blur'\n        }],\n        qualificationId: [{\n          validator: validateQualificatonId,\n          trigger: 'blur'\n        }]\n      },\n      helper_select: [],\n      activeName: 'first',\n      dictTotal: 0,\n      dictCurrentPage: 1,\n      dictPageSize: 10,\n      tableData: []\n    };\n  },\n  mounted: function mounted() {\n    this.initData();\n  },\n  methods: {\n    //初始化数据\n    initData: function initData() {\n      var _this2 = this;\n\n      this.$http({\n        url: \"/admin/getWorkerList\",\n        method: \"post\",\n        crossdomain: true,\n        body: JSON.stringify({\n          \"role\": 2\n        })\n      }).then(function (response) {\n        _this2.tableData = response.data.data;\n        _this2.dictTotal = _this2.tableData.length;\n      }).catch(function (err) {\n        console.log(err.data);\n      });\n    },\n    //添加督导\n    submit_add: function submit_add(formName) {\n      var _this3 = this;\n\n      console.log(this.form_add);\n      this.$refs[formName].validate(function (valid) {\n        if (valid) {\n          _this3.$http({\n            url: \"/admin/saveWorker\",\n            method: \"post\",\n            crossdomain: true,\n            headers: {\n              'Content-Type': 'application/json'\n            },\n            body: JSON.stringify({\n              \"username\": _this3.form_add.username,\n              \"role\": 2,\n              \"trueName\": _this3.form_add.true_name,\n              \"gender\": _this3.form_add.gender,\n              \"age\": _this3.form_add.age,\n              \"idNumber\": _this3.form_add.id_number,\n              \"phone\": _this3.form_add.phone,\n              \"email\": _this3.form_add.email,\n              \"bindID\": _this3.form_add.consultant.toString(),\n              \"password\": _this3.form_add.password,\n              \"work\": _this3.form_add.work,\n              \"title\": _this3.form_add.title,\n              \"qualification\": _this3.form_add.qualification,\n              \"qualificationId\": _this3.form_add.qualificationId,\n              \"available\": 2\n            })\n          }).then(function (res) {\n            console.log(res);\n            alert(\"添加成功\");\n            _this3.dialogFormVisible = false;\n\n            _this3.initData();\n          }).catch(function (err) {\n            console.log(err.data);\n          });\n        } else {\n          alert('请输入完整的信息');\n          return false;\n        }\n      });\n    },\n    submit_change: function submit_change(formName) {\n      var _this4 = this;\n\n      console.log(this.form_change);\n      this.$refs[formName].validate(function (valid) {\n        if (valid) {\n          _this4.$http({\n            url: \"/admin/updateWorker\",\n            method: \"post\",\n            crossdomain: true,\n            headers: {\n              'Content-Type': 'application/json'\n            },\n            body: JSON.stringify({\n              \"username\": _this4.form_change.username,\n              \"role\": _this4.form_change.role,\n              \"trueName\": _this4.form_change.trueName,\n              \"gender\": _this4.form_change.gender,\n              \"age\": _this4.form_change.age,\n              \"idNumber\": _this4.form_change.idNumber,\n              \"phone\": _this4.form_change.phone,\n              \"email\": _this4.form_change.email,\n              \"password\": _this4.form_change.password,\n              \"work\": _this4.form_change.work,\n              \"title\": _this4.form_change.title,\n              \"qualification\": _this4.form_change.qualification,\n              \"qualificationId\": _this4.form_change.qualificationId,\n              \"bindID\": _this4.form_change.bindID.toString(),\n              \"available\": _this4.form_change.available,\n              \"id\": _this4.form_change.id,\n              \"state\": _this4.form_change.state,\n              \"level\": _this4.form_change.level,\n              \"schedule\": _this4.form_change.schedule,\n              \"workingTimes\": _this4.form_change.workingTimes,\n              \"totalTime\": _this4.form_change.totalTime\n            })\n          }).then(function (res) {\n            console.log(res);\n            alert(\"修改成功\");\n            _this4.dialogFormVisible1 = false;\n\n            _this4.initData();\n          }).catch(function (err) {\n            console.log(err.data);\n          });\n        } else {\n          alert('请输入完整的信息');\n          return false;\n        }\n      });\n    },\n    add_helper: function add_helper(formName) {\n      this.dialogFormVisible = true;\n      this.getValues();\n      this.$refs[formName].resetFields();\n    },\n    ban: function ban(row) {\n      var _this5 = this;\n\n      var formName = row;\n      console.log(formName);\n\n      if (formName.available == 1 || formName.available == 2 || formName.available == '') {\n        formName.available = 3;\n        this.$http({\n          url: \"/admin/updateWorker\",\n          method: \"post\",\n          crossdomain: true,\n          headers: {\n            'Content-Type': 'application/json'\n          },\n          body: JSON.stringify(formName)\n        }).then(function (res) {\n          alert(\"禁用成功\");\n\n          _this5.initData();\n        }).catch(function (err) {\n          console.log(err.data);\n        });\n      } else if (formName.available == 3) {\n        formName.available = 2;\n        this.$http({\n          url: \"/admin/updateWorker\",\n          method: \"post\",\n          crossdomain: true,\n          headers: {\n            'Content-Type': 'application/json'\n          },\n          body: JSON.stringify(formName)\n        }).then(function (res) {\n          alert(\"启用成功\");\n\n          _this5.initData();\n        }).catch(function (err) {\n          console.log(err.data);\n        });\n      }\n    },\n    update_schedule: function update_schedule() {\n      var _this6 = this;\n\n      // var formName=row\n      console.log(this.form_schedule);\n      console.log(this.schedule_week.toString());\n      this.$http({\n        url: \"/admin/updateWorker\",\n        method: \"post\",\n        crossdomain: true,\n        headers: {\n          'Content-Type': 'application/json'\n        },\n        body: JSON.stringify({\n          \"username\": this.form_schedule.username,\n          \"role\": this.form_schedule.role,\n          \"trueName\": this.form_schedule.trueName,\n          \"gender\": this.form_schedule.gender,\n          \"age\": this.form_schedule.age,\n          \"idNumber\": this.form_schedule.idNumber,\n          \"phone\": this.form_schedule.phone,\n          \"email\": this.form_schedule.email,\n          \"password\": this.form_schedule.password,\n          \"work\": this.form_schedule.work,\n          \"title\": this.form_schedule.title,\n          \"qualification\": this.form_schedule.qualification,\n          \"qualificationId\": this.form_schedule.qualificationId,\n          \"bindID\": this.form_schedule.bindID,\n          \"available\": this.form_schedule.available,\n          \"id\": this.form_schedule.id,\n          \"state\": this.form_schedule.state,\n          \"level\": this.form_schedule.level,\n          \"schedule\": this.schedule_week.toString(\",\"),\n          \"workingTimes\": this.form_schedule.workingTimes,\n          \"totalTime\": this.form_schedule.totalTime\n        })\n      }).then(function (res) {\n        _this6.dialogFormVisible2 = false;\n        alert(\"修改成功\");\n\n        _this6.initData();\n      }).catch(function (err) {\n        console.log(err.data);\n      });\n    },\n    change_info: function change_info(row) {\n      this.dialogFormVisible1 = true;\n      this.form_change = row; // console.log(row)\n\n      this.getValues();\n      var temp = this.form_change.bindID;\n\n      if (temp === ' ' || temp === null || temp === '') {\n        this.form_change.bindID = [];\n      } else {\n        this.form_change.bindID = temp.split(\",\");\n      }\n    },\n    change_schedule: function change_schedule(row) {\n      this.dialogFormVisible2 = true;\n      this.form_schedule = row;\n      var temp = this.form_schedule.schedule;\n\n      if (temp === ' ' || temp === null || temp === '') {\n        this.schedule_week = [];\n      } else {\n        this.schedule_week = temp.split(\",\");\n      }\n\n      console.log(this.schedule_week);\n      console.log(row);\n    },\n    handleClick: function handleClick(tab, event) {\n      console.log(tab, event);\n    },\n    stateFormat: function stateFormat(row, column) {// console.log('ces')\n      // if (row.actor === 1) {\n      //   return '投稿人'\n      // } else if (row.actor === 2) {\n      //   return '审稿人'\n      // } else {\n      //   return '管理员'\n      // }\n    },\n    // 设置表头颜色\n    headClass: function headClass() {\n      return 'background:#e1e9f4;';\n    },\n    // 实时监听查询内容，更新列表\n    onChange: function onChange(e) {\n      var _this7 = this;\n\n      var value = e.target.value;\n      console.log('检测到变化' + value);\n      this.$http({\n        url: \"/admin/getWorkerList\",\n        method: \"post\",\n        crossdomain: true,\n        body: JSON.stringify({\n          \"trueName\": value,\n          \"role\": 2\n        })\n      }).then(function (res) {\n        console.log(res.data.data);\n        _this7.dictTotal = res.data.data.length;\n        _this7.tableData = res.data.data;\n      }).catch(function (err) {\n        console.log(err.data);\n      });\n    },\n    checkSpecialKey: function checkSpecialKey(str) {\n      var specialKey = \"\\\\;!@#$%^&*()\";\n\n      for (var i = 0; i < str.length; i++) {\n        if (specialKey.indexOf(str.substr(i, 1)) != -1) {\n          return false;\n        }\n      }\n\n      return true;\n    },\n    //获取咨询师列表\n    getValues: function getValues() {\n      var _this8 = this;\n\n      this.$http({\n        url: \"/admin/getWorkerList\",\n        method: \"post\",\n        crossdomain: true,\n        body: JSON.stringify({\n          \"role\": 1\n        })\n      }).then(function (res) {\n        console.log(\"c\");\n        console.log(res.data.data);\n        _this8.helper_select = res.data.data;\n      }).catch(function (err) {\n        console.log(err.data);\n      });\n    }\n  }\n};",{"version":3,"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA2MA;AACAA,MADA,kBACA;AAAA;;AACA;AACA;AACA;AACA,OAFA,MAEA;AACA;AACAC;AACA,SAFA,MAEA;AACA;AACAA;AACA,WAFA,MAEA;AACAA;AACA;AACA;AACA;AACA,KAdA;;AAeA;AACA;AACAA;AACA,OAFA,MAEA;AACAA;AACA;AACA,KANA;;AAOA;AACA;AACAA;AACA,OAFA,MAEA;AACA;;AACA;AACAA;AACA,SAFA,MAEA;AACAA;AACA;AACA;AACA,KAXA;;AAYA;AACA;AACAA;AACA,OAFA,MAEA;AACAA;AACA;AACA,KANA;;AAOA;AACA;AACAA;AACA,OAFA,MAEA;AACA;AACAA;AACA,SAFA,MAEA;AACAA;AACA;AACA;AACA,KAVA;;AAWA;AACA;AACAA;AACA,OAFA,MAEA;AACA;;AACA;AACAA;AACA,SAFA,MAEA;AACAA;AACA;AACA;AACA,KAXA;;AAYA;AACA;AACAA;AACA,OAFA,MAEA;AACA;AACA;;AACA;AACAA;AACA;AACA;;AACAA;AACA;AACA,KAZA;;AAaA;AACA;AACA;AACA,OAFA,MAEA;AACA;;AACA;AACAA;AACA,SAFA,MAEA;AACAA;AACA;AACA;AACA,KAXA;;AAYA;AACA;AACA;AACA,OAFA,MAEA;AACA;AACA;AACA,SAFA,MAEA;AACAA;AACA;AACA;AACA,KAVA;;AAWA;AACA;AACA;AACA,OAFA,MAEA;AACAA;AACA;AACA,KANA;;AAOA;AACA;AACA;AACA,OAFA,MAEA;AACAA;AACA;AACA,KANA;;AAOA;AACA;AACA;AACA,OAFA,MAEA;AACAA;AACA;AACA,KANA;;AAOA;AACA;AACA;AACA,OAFA,MAEA;AACAA;AACA;AACA,KANA;;AAOA;AACAC,8BADA;A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","names":["data","callback","dialogFormVisible","dialogFormVisible1","dialogFormVisible2","form_add","true_name","gender","age","id_number","phone","email","consultant","username","password","work","title","qualification","qualificationId","form_change","trueName","idNumber","bindID","available","id","state","level","schedule","role","workingTimes","totalTime","form_schedule","schedule_week","weeks","rules_add","validator","trigger","rules_change","helper_select","activeName","dictTotal","dictCurrentPage","dictPageSize","tableData","mounted","methods","initData","url","method","crossdomain","body","then","catch","console","submit_add","formName","headers","alert","submit_change","add_helper","ban","row","update_schedule","change_info","change_schedule","handleClick","tab","event","stateFormat","column","headClass","onChange","e","checkSpecialKey","str","getValues"],"sourceRoot":"src/views/admin","sources":["helper.vue"],"sourcesContent":["<template>\n  <div class=\"page\">\n    <div class=\"search\">\n      搜索名字\n      <div class=\"item\">\n        <input type=\"text\" style=\"position: absolute\" placeholder=\"输入名字进行搜索\" @change=\"onChange\">\n        <el-button type=\"primary\" class=\"button\" @click=\"add_helper('form_add')\">新添督导</el-button>\n        <el-dialog title=\"\" :visible.sync=\"dialogFormVisible\">\n          <div style=\"font-size: 2em;margin-left: 20px;color: black\">添加督导<div style=\"color: #6a6f77;font-size: 15px\">添加督导账号及其个人信息</div></div>\n          <el-form label-position=\"top\" label-width=\"80px\" size=\"medium \" ref=\"form_add\" :model=\"form_add\" :rules=\"rules_add\" inline=\"true\" style=\"text-align: center;margin: 20px\">\n            <el-tabs v-model=\"activeName\" @tab-click=\"handleClick\">\n              <el-tab-pane label=\"个人信息\" name=\"first\">\n                <el-form-item label=\"\" prop=\"true_name\"><div style=\"text-align: left\">姓名</div>\n                  <el-input v-model=\"form_add.true_name\" style=\"width: 300px\" placeholder=\"请输入姓名\" />\n                </el-form-item>\n                <el-form-item label=\"\" prop=\"gender\"><div style=\"text-align: left\">性别</div>\n                  <el-radio-group v-model=\"form_add.gender\" style=\"width: 300px;text-align: left\">\n                    <el-radio label=\"男\" />\n                    <el-radio label=\"女\" />\n                  </el-radio-group>\n                </el-form-item>\n                <el-form-item label=\"\" prop=\"age\"><div style=\"text-align: left\">年龄</div>\n                  <el-input v-model=\"form_add.age\" style=\"width: 300px\" placeholder=\"请输入年龄\" />\n                </el-form-item>\n                <el-form-item label=\"\" prop=\"id_number\"><div style=\"text-align: left\">身份证号码</div>\n                  <el-input v-model=\"form_add.id_number\" style=\"width: 300px\" placeholder=\"请输入身份证号\" />\n                </el-form-item>\n                <el-form-item label=\"\" prop=\"phone\"><div style=\"text-align: left\">电话</div>\n                  <el-input v-model=\"form_add.phone\" style=\"width: 300px\" placeholder=\"请输入联系电话\" />\n                </el-form-item>\n                <el-form-item label=\"\" prop=\"email\"><div style=\"text-align: left\">邮箱</div>\n                  <el-input v-model=\"form_add.email\" style=\"width: 300px\" placeholder=\"请输入邮箱地址\" />\n                </el-form-item>\n                <el-form-item label=\"\" prop=\"consultant\"><div style=\"text-align: left\">绑定咨询师</div>\n                  <el-select v-model=\"form_add.consultant\" style=\"width: 620px\" placeholder=\"请选择咨询师\" multiple>\n                    <el-option v-for=\"(item, index) in helper_select\" :key=\"index\" :label=\"item.username\" :value=\"item.username\"></el-option>\n                  </el-select>\n                </el-form-item>\n              </el-tab-pane>\n              <el-tab-pane label=\"工作信息\" name=\"second\">\n                <el-form-item label=\"\" prop=\"username\"><div style=\"text-align: left\">用户名</div>\n                  <el-input v-model=\"form_add.username\" style=\"width: 300px\" placeholder=\"请输入用户名\" />\n                </el-form-item>\n                <el-form-item label=\"\" prop=\"password\"><div style=\"text-align: left\">密码</div>\n                  <el-input v-model=\"form_add.password\" type=\"password\" style=\"width: 300px\" placeholder=\"请输入密码\" />\n                </el-form-item>\n                <el-form-item label=\"\" prop=\"work\"><div style=\"text-align: left\">工作单位</div>\n                  <el-input v-model=\"form_add.work\" style=\"width: 300px\" placeholder=\"请输入工作单位\" />\n                </el-form-item>\n                <el-form-item label=\"\" prop=\"title\"><div style=\"text-align: left\">职称</div>\n                  <el-input v-model=\"form_add.title\" style=\"width: 300px\" placeholder=\"请输入个人职称\" />\n                </el-form-item>\n                <el-form-item label=\"\" prop=\"qualification\"><div style=\"text-align: left\">督导资质</div>\n                  <el-select v-model=\"form_add.qualification\" style=\"width: 300px\" placeholder=\"请选择督导资质\">\n                    <el-option label=\"资质A\" value=\"A\" />\n                    <el-option label=\"资质B\" value=\"B\" />\n                    <el-option label=\"资质C\" value=\"C\" />\n                    <el-option label=\"资质D\" value=\"D\" />\n                    <el-option label=\"资质E\" value=\"E\" />\n                  </el-select>\n                </el-form-item>\n                <el-form-item label=\"\" prop=\"qualificationId\"><div style=\"text-align: left\">资质编号</div>\n                  <el-input v-model=\"form_add.qualificationId\" style=\"width: 300px\" placeholder=\"请输入资质编号\" />\n                </el-form-item>\n              </el-tab-pane>\n            </el-tabs>\n          </el-form>\n          <div slot=\"footer\" class=\"dialog-footer\">\n            <el-button @click=\"dialogFormVisible = false\">取 消</el-button>\n            <el-button type=\"primary\" @click=\"submit_add('form_add')\">确 定</el-button>\n          </div>\n        </el-dialog>\n        <el-dialog title=\"\" :visible.sync=\"dialogFormVisible1\">\n          <div style=\"font-size: 2em;margin-left: 20px;color: black\">修改督导<div style=\"color: #6a6f77;font-size: 15px\">修改督导账号及其个人信息</div></div>\n          <el-form label-position=\"top\" label-width=\"80px\" size=\"medium \" ref=\"form_change\" :model=\"form_change\" :rules=\"rules_change\" inline=\"true\" style=\"text-align: center;margin: 20px\">\n            <el-tabs v-model=\"activeName\" @tab-click=\"handleClick\">\n              <el-tab-pane label=\"个人信息\" name=\"first\">\n                <el-form-item label=\"\" prop=\"true_name\"><div style=\"text-align: left\">姓名</div>\n                  <el-input v-model=\"form_change.trueName\" style=\"width: 300px\" placeholder=\"请输入姓名\" />\n                </el-form-item>\n                <el-form-item label=\"\" prop=\"gender\"><div style=\"text-align: left\">性别</div>\n                  <el-radio-group v-model=\"form_change.gender\" style=\"width: 300px;text-align: left\">\n                    <el-radio label=\"男\" />\n                    <el-radio label=\"女\" />\n                  </el-radio-group>\n                </el-form-item>\n                <el-form-item label=\"\" prop=\"age\"><div style=\"text-align: left\">年龄</div>\n                  <el-input v-model=\"form_change.age\" style=\"width: 300px\" placeholder=\"请输入年龄\" />\n                </el-form-item>\n                <el-form-item label=\"\" prop=\"id_number\"><div style=\"text-align: left\">身份证号码</div>\n                  <el-input v-model=\"form_change.idNumber\" style=\"width: 300px\" placeholder=\"请输入身份证号\" />\n                </el-form-item>\n                <el-form-item label=\"\" prop=\"phone\"><div style=\"text-align: left\">电话</div>\n                  <el-input v-model=\"form_change.phone\" style=\"width: 300px\" placeholder=\"请输入联系电话\" />\n                </el-form-item>\n                <el-form-item label=\"\" prop=\"email\"><div style=\"text-align: left\">邮箱</div>\n                  <el-input v-model=\"form_change.email\" style=\"width: 300px\" placeholder=\"请输入邮箱地址\" disabled=\"true\"/>\n                </el-form-item>\n                <el-form-item label=\"\" prop=\"consultant\"><div style=\"text-align: left\">绑定咨询师</div>\n                  <el-select v-model=\"form_change.bindID\" style=\"width: 620px\" placeholder=\"请选择咨询师\" multiple>\n                    <el-option v-for=\"(item, index) in helper_select\" :key=\"index\" :label=\"item.username\" :value=\"item.username\"></el-option>\n                  </el-select>\n                </el-form-item>\n              </el-tab-pane>\n              <el-tab-pane label=\"工作信息\" name=\"second\">\n                <el-form-item label=\"\" prop=\"username\"><div style=\"text-align: left\" disabled=\"true\">用户名</div>\n                  <el-input v-model=\"form_change.username\" style=\"width: 300px\" placeholder=\"请输入用户名\" />\n                </el-form-item>\n                <el-form-item label=\"\" prop=\"password\"><div style=\"text-align: left\">密码</div>\n                  <el-input v-model=\"form_change.password\" type=\"password\" style=\"width: 300px\" placeholder=\"请输入密码\" />\n                </el-form-item>\n                <el-form-item label=\"\" prop=\"work\"><div style=\"text-align: left\">工作单位</div>\n                  <el-input v-model=\"form_change.work\" style=\"width: 300px\" placeholder=\"请输入工作单位\" />\n                </el-form-item>\n                <el-form-item label=\"\" prop=\"title\"><div style=\"text-align: left\">职称</div>\n                  <el-input v-model=\"form_change.title\" style=\"width: 300px\" placeholder=\"请输入个人职称\" />\n                </el-form-item>\n                <el-form-item label=\"\" prop=\"qualification\"><div style=\"text-align: left\">督导资质</div>\n                  <el-select v-model=\"form_change.qualification\" style=\"width: 300px\" placeholder=\"请选择督导资质\" disabled=\"true\">\n                    <el-option label=\"区域一\" value=\"shanghai\" />\n                    <el-option label=\"区域二\" value=\"beijing\" />\n                  </el-select>\n                </el-form-item>\n                <el-form-item label=\"\" prop=\"qualificationId\"><div style=\"text-align: left\">资质编号</div>\n                  <el-input v-model=\"form_change.qualificationId\" style=\"width: 300px\" placeholder=\"请输入资质编号\" disabled=\"true\" />\n                </el-form-item>\n              </el-tab-pane>\n            </el-tabs>\n          </el-form>\n          <div slot=\"footer\" class=\"dialog-footer\">\n            <el-button @click=\"dialogFormVisible1 = false\">取 消</el-button>\n            <el-button type=\"primary\" @click=\"submit_change('form_change')\">确 定</el-button>\n          </div>\n        </el-dialog>\n        <el-dialog title=\"\" :visible.sync=\"dialogFormVisible2\">\n          <div style=\"font-size: 2em;margin-left: 20px;color: black\">修改排班表</div>\n          <div>\n            <div style=\"margin-left: 20px;font-size: 15px;margin: 30px\">请选择排班日期</div>\n            <el-checkbox-group v-model=\"schedule_week\">\n              <el-checkbox-button style=\"margin-left: 20px;border: 0.1px solid grey\"  v-for=\"week in weeks\" :label=\"week\" :key=\"week\">{{week}}</el-checkbox-button>\n            </el-checkbox-group>\n          </div>\n          <div slot=\"footer\" class=\"dialog-footer\">\n            <el-button @click=\"dialogFormVisible2=false\">取 消</el-button>\n            <el-button type=\"primary\" @click=\"update_schedule\">确 定</el-button>\n          </div>\n        </el-dialog>\n      </div>\n    </div>\n    <div class=\"table\">\n      <el-table :data=\"tableData.slice((dictCurrentPage-1)*dictPageSize,dictCurrentPage*dictPageSize)\" style=\"overflow:auto;width:100%;\" height=\"90%\" :header-cell-style=\"headClass\">\n        <!--      <el-table-column prop=\"id\" label=\"编号\" width=\"100px\" />-->\n        <el-table-column prop=\"trueName\" label=\"姓名\"  width=\"150px\" fixed />\n        <el-table-column prop=\"gender\" label=\"性别\" width=\"50px\" />\n        <el-table-column prop=\"bindID\" label=\"绑定咨询师\" align=\"center\"/>\n        <el-table-column prop=\"workingTimes\" label=\"总咨询数\" width=\"120px\" align=\"center\"/>\n        <el-table-column prop=\"totalTime\" label=\"咨询时长\" width=\"100px\"/>\n        <el-table-column prop=\"schedule\" label=\"周值班安排\"  align=\"center\"/>\n        <el-table-column header-align=\"center\" align=\"center\" prop=\"operate\" label=\"操作\" fixed=\"right\" width=\"250px\">\n          <template slot-scope=\"scope\">\n            <el-button\n              size=\"small\"\n              style=\"background-color: #b1c0d0\"\n              @click=\"change_info(scope.row)\"\n            >修改\n            </el-button>\n            <el-button\n              size=\"small\"\n              style=\"background-color: #b1c0d0\"\n              @click=\"change_schedule(scope.row)\"\n            >修改排班\n            </el-button>\n            <el-button\n              v-if=\"scope.row.available==1||scope.row.available==2||scope.row.available==''\"\n              size=\"small\"\n              style=\"background-color: #b1c0d0\"\n              @click=\"ban(scope.row)\"\n            >禁用\n            </el-button>\n            <el-button\n              v-if=\"scope.row.available==3\"\n              size=\"small\"\n              style=\"background-color: #b1c0d0\"\n              @click=\"ban(scope.row)\"\n            >启用\n            </el-button>\n          </template>\n        </el-table-column>\n      </el-table>\n      <el-pagination\n        class=\"fy\"\n        layout=\"sizes, prev, pager, next, total\"\n        :current-page.sync=\"dictCurrentPage\"\n        :total=\"dictTotal\"\n        background\n        :page-sizes=\"[10, 20, 30, 40]\"\n        :page-size.sync=\"dictPageSize\"\n      />\n    </div>\n  </div>\n</template>\n\n<script>\nexport default {\n  data() {\n    var validateTrue_name = (rule, value, callback) => {\n      if (!value) {\n        return callback(new Error('用户名不能为空'));\n      }else{\n        if(value.length<2||value.length>32){\n          callback(new Error(\"长度限制为2~32个字符\"))\n        }else {\n          if (!this.checkSpecialKey(value)) {\n            callback(new Error(\"不能含有特殊字符！！\"));\n          } else {\n            callback();\n          }\n        }\n      }\n    };\n    let validateGender = (rule, value, callback) => {\n      if(!value){\n        callback(new Error(\"请选择性别\"))\n      }else {\n        callback();\n      }\n    }\n    let validateAge = (rule, value, callback) => {\n      if(!value){\n        callback(new Error(\"年龄不能为空\"))\n      }else {\n        let regular = /^[+]{0,1}(\\d+)$/\n        if (regular.test(value)) {\n          callback();\n        } else {\n          callback(new Error(\"请输入大于等于0的正整数\"));\n        }\n      }\n    }\n    let validateConsultant = (rule, value, callback) => {\n      if(!value){\n        callback(new Error(\"请选择绑定的咨询师\"))\n      }else {\n        callback();\n      }\n    }\n    let validatePhone = (rule, value, callback) => {\n      if(!value){\n        callback(new Error(\"手机号不能为空\"))\n      }else {\n        if (/^1[34578]\\d{9}$/.test(value) == false) {\n          callback(new Error(\"手机号格式错误\"));\n        } else {\n          callback();\n        }\n      }\n    }\n    let validateIDnumber = (rule, value, callback) => {\n      if(!value){\n        callback(new Error(\"身份证不能为空\"))\n      }else {\n        let regular = /^(^[1-9]\\d{7}((0\\d)|(1[0-2]))(([0|1|2]\\d)|3[0-1])\\d{3}$)|(^[1-9]\\d{5}[1-9]\\d{3}((0\\d)|(1[0-2]))(([0|1|2]\\d)|3[0-1])((\\d{4})|\\d{3}[X])$)$/;\n        if (regular.test(value)) {\n          callback();\n        } else {\n          callback(new Error('请填写正确的身份证号码'));\n        }\n      }\n    }\n    var validateEmail = (rule, value, callback) => {\n      if (value === '') {\n        callback(new Error('请正确填写邮箱'));\n      } else {\n        if (value !== '') {\n          var reg=/^[A-Za-z0-9\\u4e00-\\u9fa5]+@[a-zA-Z0-9_-]+(\\.[a-zA-Z0-9_-]+)+$/;\n          if(!reg.test(value)){\n            callback(new Error('请输入有效的邮箱'));\n          }\n        }\n        callback();\n      }\n    };\n    var validateUsername = (rule, value, callback) => {\n      if (!value) {\n        return callback(new Error('用户名不能为空'));\n      }else{\n        let regular =  /^[a-zA-Z0-9_]/\n        if (regular.test(value)) {\n          callback();\n        } else {\n          callback(new Error(\"用户名只包含英文字母和下划线\"));\n        }\n      }\n    };\n    var validatePassword = (rule, value, callback) => {\n      if (!value) {\n        return callback(new Error('密码不能为空'));\n      }else{\n        if (value.length < 6) {\n          return callback(new Error('输入密码不小于6位'));\n        }else {\n          callback();\n        }\n      }\n    };\n    var validateWork = (rule, value, callback) => {\n      if (!value) {\n        return callback(new Error('工作单位不能为空'));\n      }else{\n        callback();\n      }\n    };\n    var validateTitle = (rule, value, callback) => {\n      if (!value) {\n        return callback(new Error('职称不能为空'));\n      }else{\n        callback();\n      }\n    };\n    var validateQualificaton = (rule, value, callback) => {\n      if (!value) {\n        return callback(new Error('督导资质不能为空'));\n      }else{\n        callback();\n      }\n    };\n    var validateQualificatonId = (rule, value, callback) => {\n      if (!value) {\n        return callback(new Error('资质编号不能为空'));\n      }else{\n        callback();\n      }\n    };\n    return {\n      dialogFormVisible: false,\n      dialogFormVisible1: false,\n      dialogFormVisible2: false,\n      form_add: {\n        true_name: '',\n        gender:'',\n        age:'',\n        id_number:'',\n        phone:'',\n        email:'',\n        consultant:'',\n        username:'',\n        password:'',\n        work:'',\n        title:'',\n        qualification:'',\n        qualificationId:'',\n      },\n      form_change: {\n        trueName: '',\n        gender:'',\n        age:'',\n        idNumber:'',\n        phone:'',\n        email:'',\n        username:'',\n        password:'',\n        work:'',\n        title:'',\n        qualification:'',\n        qualificationId:'',\n        bindID:'',\n        available:'',\n        id:'',\n        state:'',\n        level:'',\n        schedule:'',\n        role:'',\n        workingTimes:'',\n        totalTime:''\n      },\n      form_schedule: {\n        trueName: '',\n        gender:'',\n        age:'',\n        idNumber:'',\n        phone:'',\n        email:'',\n        username:'',\n        password:'',\n        work:'',\n        title:'',\n        qualification:'',\n        qualificationId:'',\n        bindID:'',\n        available:'',\n        id:'',\n        state:'',\n        level:'',\n        schedule:'',\n        role:'',\n        workingTimes:'',\n        totalTime:''\n      },\n      schedule_week:[],\n      weeks:['周一','周二','周三','周四','周五','周六','周日'],\n      rules_add: {\n        true_name: [\n          {validator: validateTrue_name, trigger:'blur'}\n        ],\n        gender: [\n          {validator: validateGender, trigger:'blur'}\n        ],\n        age: [\n          {validator: validateAge, trigger:'blur'}\n        ],\n        phone: [\n          {validator: validatePhone, trigger:'blur'}\n        ],\n        id_number: [\n          {validator: validateIDnumber, trigger:'blur'}\n        ],\n        email: [\n          {validator: validateEmail, trigger:'blur'}\n        ],\n        consultant: [\n          {validator: validateConsultant, trigger:'blur'}\n        ],\n        username: [\n          {validator: validateUsername, trigger:'blur'}\n        ],\n        password: [\n          {validator: validatePassword, trigger:'blur'}\n        ],\n        work: [\n          {validator: validateWork, trigger:'blur'}\n        ],\n        title: [\n          {validator: validateTitle, trigger:'blur'}\n        ],\n        qualification: [\n          {validator: validateQualificaton, trigger:'blur'}\n        ],\n        qualificationId: [\n          {validator: validateQualificatonId, trigger:'blur'}\n        ]\n      },\n      rules_change: {\n        trueName: [\n          {validator: validateTrue_name, trigger:'blur'}\n        ],\n        gender: [\n          {validator: validateGender, trigger:'blur'}\n        ],\n        age: [\n          {validator: validateAge, trigger:'blur'}\n        ],\n        phone: [\n          {validator: validatePhone, trigger:'blur'}\n        ],\n        idNumber: [\n          {validator: validateIDnumber, trigger:'blur'}\n        ],\n        email: [\n          {validator: validateEmail, trigger:'blur'}\n        ],\n        bindID: [\n          {validator: validateConsultant, trigger:'blur'}\n        ],\n        username: [\n          {validator: validateUsername, trigger:'blur'}\n        ],\n        password: [\n          {validator: validatePassword, trigger:'blur'}\n        ],\n        work: [\n          {validator: validateWork, trigger:'blur'}\n        ],\n        title: [\n          {validator: validateTitle, trigger:'blur'}\n        ],\n        qualification: [\n          {validator: validateQualificaton, trigger:'blur'}\n        ],\n        qualificationId: [\n          {validator: validateQualificatonId, trigger:'blur'}\n        ]\n      },\n      helper_select:[],\n      activeName: 'first',\n      dictTotal: 0,\n      dictCurrentPage: 1,\n      dictPageSize: 10,\n      tableData: []\n    }\n  },\n  mounted() {\n    this.initData()\n  },\n  methods: {\n    //初始化数据\n    initData() {\n      this.$http({\n          url: \"/admin/getWorkerList\",\n          method: \"post\",\n          crossdomain: true,\n          body:JSON.stringify({\n            \"role\":2\n          })\n        })\n        .then((response) => {\n          this.tableData = response.data.data\n          this.dictTotal = this.tableData.length\n        }).catch(err => {\n          console.log(err.data)\n        })\n    },\n    //添加督导\n    submit_add(formName) {\n      console.log(this.form_add)\n      this.$refs[formName].validate((valid) => {\n        if (valid) {\n          this.$http({\n            url: \"/admin/saveWorker\",\n            method: \"post\",\n            crossdomain: true,\n            headers: {'Content-Type': 'application/json'},\n            body:JSON.stringify({\n              \"username\": this.form_add.username,\n              \"role\": 2,\n              \"trueName\": this.form_add.true_name,\n              \"gender\":this.form_add.gender,\n              \"age\":this.form_add.age,\n              \"idNumber\":this.form_add.id_number,\n              \"phone\":this.form_add.phone,\n              \"email\":this.form_add.email,\n              \"bindID\":this.form_add.consultant.toString(),\n              \"password\":this.form_add.password,\n              \"work\":this.form_add.work,\n              \"title\":this.form_add.title,\n              \"qualification\":this.form_add.qualification,\n              \"qualificationId\":this.form_add.qualificationId,\n              \"available\":2\n            })\n          }).then(res => {\n            console.log(res);\n            alert(\"添加成功\")\n            this.dialogFormVisible=false\n            this.initData();\n          }).catch(err => {\n            console.log(err.data)\n          });\n        } else {\n          alert('请输入完整的信息')\n          return false\n        }\n      })\n    },\n    submit_change(formName) {\n      console.log(this.form_change)\n      this.$refs[formName].validate((valid) => {\n        if (valid) {\n          this.$http({\n            url: \"/admin/updateWorker\",\n            method: \"post\",\n            crossdomain: true,\n            headers: {'Content-Type': 'application/json'},\n            body:JSON.stringify({\n              \"username\": this.form_change.username,\n              \"role\": this.form_change.role,\n              \"trueName\": this.form_change.trueName,\n              \"gender\":this.form_change.gender,\n              \"age\":this.form_change.age,\n              \"idNumber\":this.form_change.idNumber,\n              \"phone\":this.form_change.phone,\n              \"email\":this.form_change.email,\n              \"password\":this.form_change.password,\n              \"work\":this.form_change.work,\n              \"title\":this.form_change.title,\n              \"qualification\":this.form_change.qualification,\n              \"qualificationId\":this.form_change.qualificationId,\n              \"bindID\":this.form_change.bindID.toString(),\n              \"available\":this.form_change.available,\n              \"id\":this.form_change.id,\n              \"state\":this.form_change.state,\n              \"level\":this.form_change.level,\n              \"schedule\":this.form_change.schedule,\n              \"workingTimes\":this.form_change.workingTimes,\n              \"totalTime\":this.form_change.totalTime\n            })\n          }).then(res => {\n            console.log(res);\n            alert(\"修改成功\")\n            this.dialogFormVisible1=false\n            this.initData();\n          }).catch(err => {\n            console.log(err.data)\n          });\n        } else {\n          alert('请输入完整的信息')\n          return false\n        }\n      })\n    },\n    add_helper(formName){\n      this.dialogFormVisible=true\n      this.getValues();\n      this.$refs[formName].resetFields()\n    },\n    ban(row) {\n      var formName=row\n      console.log(formName)\n      if(formName.available==1||formName.available==2||formName.available=='') {\n        formName.available=3\n        this.$http({\n          url: \"/admin/updateWorker\",\n          method: \"post\",\n          crossdomain: true,\n          headers: { 'Content-Type': 'application/json' },\n          body: JSON.stringify(formName)\n        }).then(res => {\n          alert(\"禁用成功\")\n          this.initData();\n        }).catch(err => {\n          console.log(err.data)\n        });\n      }else if(formName.available==3){\n        formName.available=2\n        this.$http({\n          url: \"/admin/updateWorker\",\n          method: \"post\",\n          crossdomain: true,\n          headers: { 'Content-Type': 'application/json' },\n          body: JSON.stringify(formName)\n        }).then(res => {\n          alert(\"启用成功\")\n          this.initData();\n        }).catch(err => {\n          console.log(err.data)\n        });\n      }\n    },\n    update_schedule() {\n      // var formName=row\n      console.log(this.form_schedule)\n      console.log(this.schedule_week.toString())\n      this.$http({\n            url: \"/admin/updateWorker\",\n            method: \"post\",\n            crossdomain: true,\n            headers: {'Content-Type': 'application/json'},\n            body:JSON.stringify({\n              \"username\": this.form_schedule.username,\n              \"role\": this.form_schedule.role,\n              \"trueName\": this.form_schedule.trueName,\n              \"gender\":this.form_schedule.gender,\n              \"age\":this.form_schedule.age,\n              \"idNumber\":this.form_schedule.idNumber,\n              \"phone\":this.form_schedule.phone,\n              \"email\":this.form_schedule.email,\n              \"password\":this.form_schedule.password,\n              \"work\":this.form_schedule.work,\n              \"title\":this.form_schedule.title,\n              \"qualification\":this.form_schedule.qualification,\n              \"qualificationId\":this.form_schedule.qualificationId,\n              \"bindID\":this.form_schedule.bindID,\n              \"available\":this.form_schedule.available,\n              \"id\":this.form_schedule.id,\n              \"state\":this.form_schedule.state,\n              \"level\":this.form_schedule.level,\n              \"schedule\":this.schedule_week.toString(\",\"),\n              \"workingTimes\":this.form_schedule.workingTimes,\n              \"totalTime\":this.form_schedule.totalTime\n            })\n          }).then(res => {\n            this.dialogFormVisible2=false\n            alert(\"修改成功\")\n            this.initData();\n          }).catch(err => {\n            console.log(err.data)\n      });\n    },\n    change_info(row) {\n      this.dialogFormVisible1=true\n      this.form_change=row\n      // console.log(row)\n      this.getValues();\n      var temp=this.form_change.bindID\n      if(temp===' '||temp===null||temp===''){\n        this.form_change.bindID=[]\n      }else{\n        this.form_change.bindID = temp.split(\",\")\n      }\n    },\n    change_schedule(row) {\n      this.dialogFormVisible2=true\n      this.form_schedule=row\n      var temp=this.form_schedule.schedule\n      if(temp===' '||temp===null||temp===''){\n        this.schedule_week=[]\n      }else{\n        this.schedule_week = temp.split(\",\")\n      }\n      console.log(this.schedule_week)\n      console.log(row)\n    },\n    handleClick(tab, event) {\n      console.log(tab, event)\n    },\n    stateFormat(row, column) {\n      // console.log('ces')\n      // if (row.actor === 1) {\n      //   return '投稿人'\n      // } else if (row.actor === 2) {\n      //   return '审稿人'\n      // } else {\n      //   return '管理员'\n      // }\n    },\n    // 设置表头颜色\n    headClass() {\n      return 'background:#e1e9f4;'\n    },\n    // 实时监听查询内容，更新列表\n    onChange(e) {\n      const { value } = e.target\n      console.log('检测到变化' + value)\n      this.$http({\n        url: \"/admin/getWorkerList\",\n        method: \"post\",\n        crossdomain: true,\n        body:JSON.stringify({\n          \"trueName\": value,\n          \"role\":2\n        })\n      }).then(res => {\n        console.log(res.data.data);\n        this.dictTotal = res.data.data.length;\n        this.tableData=res.data.data\n      }).catch(err => {\n        console.log(err.data)\n      });\n    },\n    checkSpecialKey(str) {\n      var specialKey = \"\\\\;!@#$%^&*()\";\n      for (var i = 0; i < str.length; i++) {\n        if (specialKey.indexOf(str.substr(i, 1)) != -1) {\n          return false;\n        }\n      }\n      return true;\n    },\n    //获取咨询师列表\n    getValues(){\n      this.$http({\n        url: \"/admin/getWorkerList\",\n        method: \"post\",\n        crossdomain: true,\n        body:JSON.stringify({\n          \"role\": 1,\n        })\n      }).then(res => {\n        console.log(\"c\")\n        console.log(res.data.data);\n        this.helper_select= res.data.data\n      }).catch(err => {\n        console.log(err.data)\n      });\n    },\n\n  }\n}\n</script>\n\n<style lang=\"scss\" scoped>\ninput[type=\"text\"],#btn1,#btn2{\n  box-sizing: border-box;\n  text-align:left;\n  font-size:1em;\n  height:2.5em;\n  border-radius:4px;\n  border:1px solid #c8cccf;\n  color:#6a6f77;\n  -web-kit-appearance:none;\n  -moz-appearance: none;\n  display:block;\n  outline:0;\n  padding:0 1em;\n  text-decoration:none;\n  width:20%;\n}\ninput[type=\"text\"]:focus{\n  border:1px solid #5498e5;\n}\n.page {\n  height: 95%;\n  position: relative;\n  margin-top: 20px;\n  .search{\n    margin-left: 1%;\n    text-align: left;\n    .item{\n      position: relative;\n      margin-top: 10px;\n      margin-bottom: 10px;\n      .button{\n        position: relative;\n        left: 91%\n      }\n    }\n  }\n  .table{\n    width: 98%;\n    margin: 0 auto;\n    height: 88%;\n    .fy {\n      height: 10%;\n      position: absolute;\n      margin-top: 20px;\n      right: 10px;\n    }\n  }\n}\n\n</style>\n"]}]}