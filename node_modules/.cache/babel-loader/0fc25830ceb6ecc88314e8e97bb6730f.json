{"remainingRequest":"D:\\project\\softwareDevelopment\\IM-Web\\node_modules\\babel-loader\\lib\\index.js!D:\\project\\softwareDevelopment\\IM-Web\\node_modules\\cache-loader\\dist\\cjs.js??ref--0-0!D:\\project\\softwareDevelopment\\IM-Web\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!D:\\project\\softwareDevelopment\\IM-Web\\src\\components\\message\\message-elements\\group-system-notice-element.vue?vue&type=script&lang=js&","dependencies":[{"path":"D:\\project\\softwareDevelopment\\IM-Web\\src\\components\\message\\message-elements\\group-system-notice-element.vue","mtime":1649851412192},{"path":"D:\\project\\softwareDevelopment\\IM-Web\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1649851454799},{"path":"D:\\project\\softwareDevelopment\\IM-Web\\node_modules\\babel-loader\\lib\\index.js","mtime":1649851455045},{"path":"D:\\project\\softwareDevelopment\\IM-Web\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1649851454799},{"path":"D:\\project\\softwareDevelopment\\IM-Web\\node_modules\\vue-loader\\lib\\index.js","mtime":1649851455309},{"path":"D:\\project\\softwareDevelopment\\IM-Web\\babel.config.js","mtime":1649851550121},{"path":"D:\\project\\softwareDevelopment\\IM-Web\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1649851454799},{"path":"D:\\project\\softwareDevelopment\\IM-Web\\node_modules\\babel-loader\\lib\\index.js","mtime":1649851455045},{"path":"D:\\project\\softwareDevelopment\\IM-Web\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1649851454799},{"path":"D:\\project\\softwareDevelopment\\IM-Web\\node_modules\\vue-loader\\lib\\index.js","mtime":1649851455309}],"contextDependencies":[],"result":["import _Radio2 from \"element-ui/lib/theme-chalk/radio.css\";\nimport \"element-ui/lib/theme-chalk/base.css\";\nimport _Radio from \"element-ui/lib/radio\";\nimport _RadioGroup2 from \"element-ui/lib/theme-chalk/radio-group.css\";\nimport \"element-ui/lib/theme-chalk/base.css\";\nimport _RadioGroup from \"element-ui/lib/radio-group\";\nimport _FormItem2 from \"element-ui/lib/theme-chalk/form-item.css\";\nimport \"element-ui/lib/theme-chalk/base.css\";\nimport _FormItem from \"element-ui/lib/form-item\";\nimport _Form2 from \"element-ui/lib/theme-chalk/form.css\";\nimport \"element-ui/lib/theme-chalk/base.css\";\nimport _Form from \"element-ui/lib/form\";\nimport _Dialog2 from \"element-ui/lib/theme-chalk/dialog.css\";\nimport \"element-ui/lib/theme-chalk/base.css\";\nimport _Dialog from \"element-ui/lib/dialog\";\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\nimport MessageBubble from \"../message-bubble\";\nimport { translateGroupSystemNotice } from \"../../../utils/common\";\nexport default {\n  name: 'GroupSystemNoticeElement',\n  props: {\n    payload: {\n      type: Object,\n      required: true\n    },\n    message: {\n      type: Object,\n      required: false\n    }\n  },\n  components: {\n    ElDialog: _Dialog,\n    ElForm: _Form,\n    ElFormItem: _FormItem,\n    ElRadioGroup: _RadioGroup,\n    ElRadio: _Radio,\n    MessageBubble: MessageBubble\n  },\n  data: function data() {\n    return {\n      showDialog: false,\n      form: {\n        handleAction: 'Agree',\n        handleMessage: ''\n      }\n    };\n  },\n  computed: {\n    text: function text() {\n      return translateGroupSystemNotice(this.message);\n    },\n    title: function title() {\n      if (this.message.type === this.TIM.TYPES.MSG_GRP_SYS_NOTICE) {\n        return '群系统通知';\n      }\n\n      return '系统通知';\n    },\n    isJoinGroupRequest: function isJoinGroupRequest() {\n      return this.payload.operationType === 1 || this.payload.operationType === 12;\n    }\n  },\n  methods: {\n    handleGroupApplication: function handleGroupApplication() {\n      var _this = this;\n\n      if (this.payload.operationType === 12) {\n        this.tim.callExperimentalAPI('handleGroupInvitation', {\n          handleAction: this.form.handleAction,\n          message: this.message\n        }).then(function () {\n          _this.showDialog = false;\n\n          _this.$store.commit('removeMessage', _this.message);\n        }).catch(function (error) {\n          _this.$store.commit('showMessage', {\n            type: 'error',\n            message: error.message\n          });\n\n          _this.showDialog = false;\n        });\n      }\n\n      if (this.payload.operationType === 1) {\n        this.tim.handleGroupApplication({\n          handleAction: this.form.handleAction,\n          handleMessage: this.form.handleMessage,\n          message: this.message\n        }).then(function () {\n          _this.showDialog = false;\n\n          _this.$store.commit('removeMessage', _this.message);\n        }).catch(function (error) {\n          _this.$store.commit('showMessage', {\n            type: 'error',\n            message: error.message\n          });\n\n          _this.showDialog = false;\n        });\n      }\n    }\n  }\n};",{"version":3,"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAkCA;AACA;AAEA;AACAA,kCADA;AAEAC;AACAC;AACAC,kBADA;AAEAC;AAFA,KADA;AAKAC;AACAF,kBADA;AAEAC;AAFA;AALA,GAFA;AAYAE;AACAC,qBADA;AAEAC,iBAFA;AAGAC,yBAHA;AAIAC,6BAJA;AAKAC,mBALA;AAMAC;AANA,GAZA;AAoBAC,MApBA,kBAoBA;AACA;AACAC,uBADA;AAEAC;AACAC,6BADA;AAEAC;AAFA;AAFA;AAOA,GA5BA;AA6BAC;AACAC,QADA,kBACA;AACA;AACA,KAHA;AAIAC,SAJA,mBAIA;AACA;AACA;AACA;;AACA;AACA,KATA;AAUAC,sBAVA,gCAUA;AACA;AACA;AAZA,GA7BA;AA2CAC;AACAC,0BADA,oCACA;AAAA;;AACA;AACA;AACAP,8CADA;AAEAX;AAFA,WAGAmB,IAHA,CAGA;AACA;;AACA;AACA,SANA,EAMAC,KANA,CAMA;AACA;AACAtB,yBADA;AAEAE;AAFA;;AAIA;AACA,SAZA;AAaA;;AACA;AACA,iBACAkB,sBADA,CACA;AACAP,8CADA;AAEAC,gDAFA;AAGAZ;AAHA,SADA,EAMAmB,IANA,CAMA;AACA;;AACA;AACA,SATA,EAUAC,KAVA,CAUA;AACA;AACAtB,yBADA;AAEAE;AAFA;;AAIA;AACA,SAhBA;AAiBA;AAEA;AArCA;AA3CA","names":["name","props","payload","type","required","message","components","ElDialog","ElForm","ElFormItem","ElRadioGroup","ElRadio","MessageBubble","data","showDialog","form","handleAction","handleMessage","computed","text","title","isJoinGroupRequest","methods","handleGroupApplication","then","catch"],"sourceRoot":"src/components/message/message-elements","sources":["group-system-notice-element.vue"],"sourcesContent":["<template>\r\n  <message-bubble :isMine=\"false\" :message=message>\r\n    <div class=\"group-system-element-wrapper\">\r\n      {{ text }}\r\n      <el-button v-if=\"isJoinGroupRequest\" type=\"text\" @click=\"showDialog = true\">处理</el-button>\r\n      <el-dialog title=\"处理加群申请\" :visible.sync=\"showDialog\" width=\"30%\">\r\n        <el-form ref=\"form\" v-model=\"form\" label-width=\"100px\">\r\n          <el-form-item label=\"处理结果：\">\r\n            <el-radio-group v-model=\"form.handleAction\">\r\n              <el-radio label=\"Agree\">同意</el-radio>\r\n              <el-radio label=\"Reject\">拒绝</el-radio>\r\n            </el-radio-group>\r\n          </el-form-item>\r\n          <el-form-item label=\"附言：\" v-show=\"this.payload.operationType === 1\">\r\n            <el-input\r\n              type=\"textarea\"\r\n              resize=\"none\"\r\n              :rows=\"3\"\r\n              placeholder=\"请输入附言\"\r\n              v-model=\"form.handleMessage\"\r\n            />\r\n          </el-form-item>\r\n        </el-form>\r\n        <span slot=\"footer\" class=\"dialog-footer\">\r\n          <el-button @click=\"showDialog = false\">取 消</el-button>\r\n          <el-button type=\"primary\" @click=\"handleGroupApplication\">确 定</el-button>\r\n        </span>\r\n      </el-dialog>\r\n    </div>\r\n  </message-bubble>\r\n</template>\r\n\r\n<script>\r\nimport { Dialog, Form, FormItem, RadioGroup, Radio } from 'element-ui'\r\nimport MessageBubble from '../message-bubble'\r\nimport { translateGroupSystemNotice } from '../../../utils/common'\r\n\r\nexport default {\r\n  name: 'GroupSystemNoticeElement',\r\n  props: {\r\n    payload: {\r\n      type: Object,\r\n      required: true\r\n    },\r\n    message: {\r\n      type: Object,\r\n      required: false\r\n    }\r\n  },\r\n  components: {\r\n    ElDialog: Dialog,\r\n    ElForm: Form,\r\n    ElFormItem: FormItem,\r\n    ElRadioGroup: RadioGroup,\r\n    ElRadio: Radio,\r\n    MessageBubble\r\n  },\r\n  data() {\r\n    return {\r\n      showDialog: false,\r\n      form: {\r\n        handleAction: 'Agree',\r\n        handleMessage: ''\r\n      }\r\n    }\r\n  },\r\n  computed: {\r\n    text() {\r\n      return translateGroupSystemNotice(this.message)\r\n    },\r\n    title() {\r\n      if (this.message.type === this.TIM.TYPES.MSG_GRP_SYS_NOTICE) {\r\n        return '群系统通知'\r\n      }\r\n      return '系统通知'\r\n    },\r\n    isJoinGroupRequest() {\r\n      return this.payload.operationType === 1 || this.payload.operationType === 12\r\n    }\r\n  },\r\n  methods: {\r\n    handleGroupApplication() {\r\n      if(this.payload.operationType === 12) {\r\n        this.tim.callExperimentalAPI('handleGroupInvitation', {\r\n          handleAction: this.form.handleAction,\r\n          message: this.message\r\n        }).then(() => {\r\n          this.showDialog = false\r\n          this.$store.commit('removeMessage', this.message)\r\n        }).catch(error => {\r\n          this.$store.commit('showMessage', {\r\n            type: 'error',\r\n            message: error.message\r\n          })\r\n          this.showDialog = false\r\n        })\r\n      }\r\n      if(this.payload.operationType === 1) {\r\n        this.tim\r\n                .handleGroupApplication({\r\n                  handleAction: this.form.handleAction,\r\n                  handleMessage: this.form.handleMessage,\r\n                  message: this.message\r\n                })\r\n                .then(() => {\r\n                  this.showDialog = false\r\n                  this.$store.commit('removeMessage', this.message)\r\n                })\r\n                .catch(error => {\r\n                  this.$store.commit('showMessage', {\r\n                    type: 'error',\r\n                    message: error.message\r\n                  })\r\n                  this.showDialog = false\r\n                })\r\n      }\r\n\r\n    }\r\n  }\r\n}\r\n</script>\r\n\r\n<style lang=\"stylus\" scoped>\r\n.card {\r\n  background: #fff;\r\n  padding: 12px;\r\n  border-radius: 5px;\r\n  width: 300px;\r\n\r\n  .card-header {\r\n    font-size: 18px;\r\n  }\r\n\r\n  .card-content {\r\n    font-size: 14px;\r\n  }\r\n}\r\n</style>\r\n"]}]}