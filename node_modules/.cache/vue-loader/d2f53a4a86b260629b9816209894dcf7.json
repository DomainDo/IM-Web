{"remainingRequest":"D:\\project\\softwareDevelopment\\IM-Web\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!D:\\project\\softwareDevelopment\\IM-Web\\src\\views\\admin\\consultant.vue?vue&type=style&index=0&id=3a6663d5&lang=scss&scoped=true&","dependencies":[{"path":"D:\\project\\softwareDevelopment\\IM-Web\\src\\views\\admin\\consultant.vue","mtime":1649835335736},{"path":"D:\\project\\softwareDevelopment\\IM-Web\\node_modules\\css-loader\\index.js","mtime":1649851454163},{"path":"D:\\project\\softwareDevelopment\\IM-Web\\node_modules\\vue-loader\\lib\\loaders\\stylePostLoader.js","mtime":1649851455885},{"path":"D:\\project\\softwareDevelopment\\IM-Web\\node_modules\\postcss-loader\\src\\index.js","mtime":1649851455029},{"path":"D:\\project\\softwareDevelopment\\IM-Web\\node_modules\\sass-loader\\dist\\cjs.js","mtime":1649851830636},{"path":"D:\\project\\softwareDevelopment\\IM-Web\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1649851454799},{"path":"D:\\project\\softwareDevelopment\\IM-Web\\node_modules\\vue-loader\\lib\\index.js","mtime":1649851455309}],"contextDependencies":[],"result":["\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\r\ninput[type=\"text\"],#btn1,#btn2{\r\n  box-sizing: border-box;\r\n  text-align:left;\r\n  font-size:1em;\r\n  height:2.5em;\r\n  border-radius:4px;\r\n  border:1px solid #c8cccf;\r\n  color:#6a6f77;\r\n  -web-kit-appearance:none;\r\n  -moz-appearance: none;\r\n  display:block;\r\n  outline:0;\r\n  padding:0 1em;\r\n  text-decoration:none;\r\n  width:20%;\r\n}\r\ninput[type=\"text\"]:focus{\r\n  border:1px solid #5498e5;\r\n}\r\n.page {\r\n  height: 95%;\r\n  position: relative;\r\n  margin-top: 20px;\r\n  .search{\r\n    margin-left: 1%;\r\n    text-align: left;\r\n    .item{\r\n      position: relative;\r\n      margin-top: 10px;\r\n      margin-bottom: 10px;\r\n      .button{\r\n        position: relative;\r\n        left: 91%\r\n      }\r\n    }\r\n  }\r\n  .table{\r\n    width: 98%;\r\n    margin: 0 auto;\r\n    height: 88%;\r\n    .fy {\r\n      height: 10%;\r\n      position: absolute;\r\n      margin-top: 20px;\r\n      right: 10px;\r\n    }\r\n  }\r\n}\r\n",{"version":3,"sources":["consultant.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAuwBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"consultant.vue","sourceRoot":"src/views/admin","sourcesContent":["<template>\r\n  <div class=\"page\">\r\n    <div class=\"search\">\r\n      搜索名字\r\n      <div class=\"item\">\r\n        <input type=\"text\" style=\"position: absolute\" placeholder=\"输入名字进行搜索\" @change=\"onChange\">\r\n        <el-button type=\"primary\" class=\"button\" @click=\"add_consultant('form_add')\">新添咨询师</el-button>\r\n        <el-dialog title=\"\" :visible.sync=\"dialogFormVisible\">\r\n          <div style=\"font-size: 2em;margin-left: 20px;color: black\">添加咨询师<div style=\"color: #6a6f77;font-size: 15px\">添加咨询师账号并添加其个人信息</div></div>\r\n          <el-form label-position=\"top\" label-width=\"80px\" size=\"medium \"  ref=\"form_add\" :model=\"form_add\" :rules=\"rules_add\" inline=\"true\"  style=\"text-align: center;margin: 20px\">\r\n            <el-tabs v-model=\"activeName\" @tab-click=\"handleClick\">\r\n              <el-tab-pane label=\"个人信息\" name=\"first\">\r\n                <el-form-item label=\"\" prop=\"true_name\"><div style=\"text-align: left\">姓名</div>\r\n                  <el-input v-model=\"form_add.true_name\" style=\"width: 300px\" placeholder=\"请输入姓名\" />\r\n                </el-form-item>\r\n                <el-form-item label=\"\" prop=\"gender\"><div style=\"text-align: left\">性别</div>\r\n                  <el-radio-group v-model=\"form_add.gender\" style=\"width: 300px;text-align: left\">\r\n                    <el-radio label=\"男\" />\r\n                    <el-radio label=\"女\" />\r\n                  </el-radio-group>\r\n                </el-form-item>\r\n                <el-form-item label=\"\" prop=\"age\"><div style=\"text-align: left\">年龄</div>\r\n                  <el-input v-model=\"form_add.age\" style=\"width: 300px\" placeholder=\"请输入年龄\" />\r\n                </el-form-item>\r\n                <el-form-item label=\"\" prop=\"id_number\"><div style=\"text-align: left\">身份证号码</div>\r\n                  <el-input v-model=\"form_add.id_number\" style=\"width: 300px\" placeholder=\"请输入身份证号\" />\r\n                </el-form-item>\r\n                <el-form-item label=\"\" prop=\"phone\"><div style=\"text-align: left\">电话</div>\r\n                  <el-input v-model=\"form_add.phone\" style=\"width: 300px\" placeholder=\"请输入联系电话\" />\r\n                </el-form-item>\r\n                <el-form-item label=\"\" prop=\"email\"><div style=\"text-align: left\">邮箱</div>\r\n                  <el-input v-model=\"form_add.email\" style=\"width: 300px\" placeholder=\"请输入邮箱地址\" />\r\n                </el-form-item>\r\n                <el-form-item label=\"\" prop=\"helper\"><div style=\"text-align: left\">绑定督导</div>\r\n                  <el-select v-model=\"form_add.helper\" style=\"width: 620px\" placeholder=\"请选择督导\" multiple>\r\n                    <el-option v-for=\"(item, index) in helper_select\" :key=\"index\" :label=\"item.username\" :value=\"item.username\"></el-option>\r\n                  </el-select>\r\n                </el-form-item>\r\n              </el-tab-pane>\r\n              <el-tab-pane label=\"工作信息\" name=\"second\">\r\n                <el-form-item label=\"\" prop=\"username\"><div style=\"text-align: left\">用户名</div>\r\n                  <el-input v-model=\"form_add.username\" style=\"width: 300px\" placeholder=\"请输入用户名\" />\r\n                </el-form-item>\r\n                <el-form-item label=\"\" prop=\"password\"><div style=\"text-align: left\">密码</div>\r\n                  <el-input v-model=\"form_add.password\" type=\"password\" style=\"width: 300px\" placeholder=\"请输入密码\" />\r\n                </el-form-item>\r\n                <el-form-item label=\"\" prop=\"work\"><div style=\"text-align: left\">工作单位</div>\r\n                  <el-input v-model=\"form_add.work\" style=\"width: 300px\" placeholder=\"请输入工作单位\" />\r\n                </el-form-item>\r\n                <el-form-item label=\"\" prop=\"title\"><div style=\"text-align: left\">职称</div>\r\n                  <el-input v-model=\"form_add.title\" style=\"width: 300px\" placeholder=\"请输入个人职称\" />\r\n                </el-form-item>\r\n              </el-tab-pane>\r\n            </el-tabs>\r\n          </el-form>\r\n          <div slot=\"footer\" class=\"dialog-footer\">\r\n            <el-button @click=\"cancel_add('form_add')\">取 消</el-button>\r\n            <el-button type=\"primary\" @click=\"submit_add('form_add')\">确 定</el-button>\r\n          </div>\r\n        </el-dialog>\r\n        <el-dialog title=\"\" :visible.sync=\"dialogFormVisible1\">\r\n          <div style=\"font-size: 2em;margin-left: 20px;color: black\">修改咨询师<div style=\"color: #6a6f77;font-size: 15px\">修改咨询师个人信息</div></div>\r\n          <el-form label-position=\"top\" label-width=\"80px\" size=\"medium \"  ref=\"form_change\" :model=\"form_change\" :rules=\"rules_change\" inline=\"true\"  style=\"text-align: center;margin: 20px\">\r\n            <el-tabs v-model=\"activeName\" @tab-click=\"handleClick\">\r\n              <el-tab-pane label=\"个人信息\" name=\"first\">\r\n                <el-form-item label=\"\" prop=\"true_name\"><div style=\"text-align: left\">姓名</div>\r\n                  <el-input v-model=\"form_change.trueName\" style=\"width: 300px\" placeholder=\"请输入姓名\" />\r\n                </el-form-item>\r\n                <el-form-item label=\"\" prop=\"gender\"><div style=\"text-align: left\">性别</div>\r\n                  <el-radio-group v-model=\"form_change.gender\" style=\"width: 300px;text-align: left\">\r\n                    <el-radio label=\"男\" />\r\n                    <el-radio label=\"女\" />\r\n                  </el-radio-group>\r\n                </el-form-item>\r\n                <el-form-item label=\"\" prop=\"age\"><div style=\"text-align: left\">年龄</div>\r\n                  <el-input v-model=\"form_change.age\" style=\"width: 300px\" placeholder=\"请输入年龄\" />\r\n                </el-form-item>\r\n                <el-form-item label=\"\" prop=\"id_number\"  ><div style=\"text-align: left\">身份证号码</div>\r\n                  <el-input v-model=\"form_change.idNumber\" style=\"width: 300px\" placeholder=\"请输入身份证号\" />\r\n                </el-form-item>\r\n                <el-form-item label=\"\" prop=\"phone\" ><div style=\"text-align: left\">电话</div>\r\n                  <el-input v-model=\"form_change.phone\" style=\"width: 300px\" placeholder=\"请输入联系电话\" />\r\n                </el-form-item>\r\n                <el-form-item label=\"\" prop=\"email\" ><div style=\"text-align: left\">邮箱</div>\r\n                  <el-input v-model=\"form_change.email\" style=\"width: 300px\" placeholder=\"请输入邮箱地址\" disabled=\"true\"/>\r\n                </el-form-item>\r\n                <el-form-item label=\"\" prop=\"helper\"><div style=\"text-align: left\">绑定督导</div>\r\n                  <el-select v-model=\"form_change.bindID\" style=\"width: 620px\" placeholder=\"请选择督导\" multiple  @change=\"applicantTypes\">\r\n                    <el-option v-for=\"(item, index) in helper_select\" :key=\"index\" :label=\"item.username\" :value=\"item.username\"></el-option>\r\n                  </el-select>\r\n                </el-form-item>\r\n              </el-tab-pane>\r\n              <el-tab-pane label=\"工作信息\" name=\"second\">\r\n                <el-form-item label=\"\" prop=\"username\"><div style=\"text-align: left\">用户名</div>\r\n                  <el-input v-model=\"form_change.username\" style=\"width: 300px\" placeholder=\"请输入用户名\" disabled=\"true\"/>\r\n                </el-form-item>\r\n                <el-form-item label=\"\" prop=\"password\"><div style=\"text-align: left\">密码</div>\r\n                  <el-input v-model=\"form_change.password\" type=\"password\" style=\"width: 300px\" placeholder=\"请输入密码\" />\r\n                </el-form-item>\r\n                <el-form-item label=\"\" prop=\"work\"><div style=\"text-align: left\">工作单位</div>\r\n                  <el-input v-model=\"form_change.work\" style=\"width: 300px\" placeholder=\"请输入工作单位\" />\r\n                </el-form-item>\r\n                <el-form-item label=\"\" prop=\"title\"><div style=\"text-align: left\">职称</div>\r\n                  <el-input v-model=\"form_change.title\" style=\"width: 300px\" placeholder=\"请输入个人职称\" />\r\n                </el-form-item>\r\n              </el-tab-pane>\r\n            </el-tabs>\r\n          </el-form>\r\n          <div slot=\"footer\" class=\"dialog-footer\">\r\n            <el-button @click=\"dialogFormVisible1=false\">取 消</el-button>\r\n            <el-button type=\"primary\" @click=\"submit_change('form_change')\">确 定</el-button>\r\n          </div>\r\n        </el-dialog>\r\n        <el-dialog title=\"\" :visible.sync=\"dialogFormVisible2\">\r\n          <div style=\"font-size: 2em;margin-left: 20px;color: black\">详情信息</div>\r\n          <div style=\"margin-top: 20px;margin-left: 20px;font-size: 1.5em;line-height: 2em\">\r\n            <div style=\"display: inline-block;width: 50%;border-bottom: 1px solid grey\">姓名:    {{form_detail.trueName}}</div>\r\n            <div style=\"display: inline-block;width: 50%;border-bottom: 1px solid grey\">性别: {{form_detail.gender}}</div>\r\n            <div style=\"display: inline-block;width: 50%;border-bottom: 1px solid grey\">年龄: {{form_detail.age}}</div>\r\n            <div style=\"display: inline-block;width: 50%;border-bottom: 1px solid grey\">身份证号码: {{form_detail.idNumber}}</div>\r\n            <div style=\"display: inline-block;width: 50%;border-bottom: 1px solid grey\">手机号码: {{form_detail.phone}}</div>\r\n            <div style=\"display: inline-block;width: 50%;border-bottom: 1px solid grey\">邮箱: {{form_detail.email}}</div>\r\n            <div style=\"display: inline-block;width: 50%;border-bottom: 1px solid grey\">用户名: {{form_detail.username}}</div>\r\n            <div style=\"display: inline-block;width: 50%;border-bottom: 1px solid grey\">密码: {{form_detail.password}}</div>\r\n            <div style=\"display: inline-block;width: 50%;border-bottom: 1px solid grey\">工作单位: {{form_detail.work}}</div>\r\n            <div style=\"display: inline-block;width: 50%;border-bottom: 1px solid grey\">职称: {{form_detail.title}}</div>\r\n          </div>\r\n          <div slot=\"footer\" class=\"dialog-footer\">\r\n            <el-button type=\"primary\" @click=\"dialogFormVisible2=false\">确 定</el-button>\r\n          </div>\r\n        </el-dialog>\r\n        <el-dialog title=\"\" :visible.sync=\"dialogFormVisible3\">\r\n          <div style=\"font-size: 2em;margin-left: 20px;color: black\">修改排班表</div>\r\n          <div>\r\n            <div style=\"margin-left: 20px;font-size: 15px;margin: 30px\">请选择排班日期</div>\r\n            <el-checkbox-group v-model=\"schedule_week\">\r\n              <el-checkbox-button style=\"margin-left: 20px;border: 0.1px solid grey\"  v-for=\"week in weeks\" :label=\"week\" :key=\"week\">{{week}}</el-checkbox-button>\r\n            </el-checkbox-group>\r\n          </div>\r\n          <div slot=\"footer\" class=\"dialog-footer\">\r\n            <el-button @click=\"dialogFormVisible3=false\">取 消</el-button>\r\n            <el-button type=\"primary\" @click=\"update_schedule\">确 定</el-button>\r\n          </div>\r\n        </el-dialog>\r\n      </div>\r\n    </div>\r\n    <div class=\"table\">\r\n      <el-table :data=\"tableData.slice((dictCurrentPage-1)*dictPageSize,dictCurrentPage*dictPageSize)\" style=\"overflow:auto;width:100%;\" height=\"90%\" :header-cell-style=\"headClass\">\r\n        <!--      <el-table-column prop=\"id\" label=\"编号\" width=\"100px\" />-->\r\n        <el-table-column prop=\"trueName\" label=\"姓名\" width=\"120px\" fixed />\r\n        <el-table-column prop=\"gender\" label=\"性别\" width=\"50px\"/>\r\n        <el-table-column prop=\"bindID\" label=\"绑定督导\"  align=\"center\" />\r\n        <el-table-column prop=\"workingTimes\" label=\"总咨询数\" width=\"120px\" align=\"center\"/>\r\n        <el-table-column prop=\"totalTime\" label=\"咨询时长\" width=\"100px\"/>\r\n        <el-table-column prop=\"level\" label=\"平均咨询等级\" :formatter=\"stateFormat\" width=\"120px\"/>\r\n        <el-table-column prop=\"schedule\" label=\"周值班安排\" align=\"center\"/>\r\n        <el-table-column header-align=\"center\" align=\"center\" prop=\"operate\" label=\"操作\" width=\"330px\" fixed=\"right\">\r\n          <template slot-scope=\"scope\">\r\n            <el-button\r\n              size=\"small\"\r\n              style=\"background-color: #b1c0d0\"\r\n              @click=\"detail(scope.row)\"\r\n            >查看详情\r\n            </el-button>\r\n            <el-button\r\n              size=\"small\"\r\n              style=\"background-color: #b1c0d0\"\r\n              @click=\"change_consultant(scope.row)\"\r\n            >修改\r\n            </el-button>\r\n            <el-button\r\n              size=\"small\"\r\n              style=\"background-color: #b1c0d0\"\r\n              @click=\"change_schedule(scope.row)\"\r\n            >修改排班\r\n            </el-button>\r\n            <el-button\r\n              size=\"small\"\r\n              style=\"background-color: #b1c0d0\"\r\n              @click=\"delete_consultant(scope.row)\"\r\n            >删除\r\n            </el-button>\r\n          </template>\r\n        </el-table-column>\r\n      </el-table>\r\n      <el-pagination\r\n        class=\"fy\"\r\n        layout=\"sizes, prev, pager, next, total\"\r\n        :current-page.sync=\"dictCurrentPage\"\r\n        :total=\"dictTotal\"\r\n        background\r\n        :page-sizes=\"[10, 20, 30, 40]\"\r\n        :page-size.sync=\"dictPageSize\"\r\n      />\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport Qs from 'qs'\r\nexport default {\r\n  data() {\r\n    var validateTrue_name = (rule, value, callback) => {\r\n      if (!value) {\r\n        return callback(new Error('用户名不能为空'));\r\n      }else{\r\n        if(value.length<2||value.length>32){\r\n          callback(new Error(\"长度限制为2~32个字符\"))\r\n        }else {\r\n          if (!this.checkSpecialKey(value)) {\r\n            callback(new Error(\"不能含有特殊字符！！\"));\r\n          } else {\r\n            callback();\r\n          }\r\n        }\r\n      }\r\n    };\r\n    let validateGender = (rule, value, callback) => {\r\n      if(!value){\r\n        callback(new Error(\"请选择性别\"))\r\n      }else {\r\n          callback();\r\n      }\r\n    }\r\n    let validateAge = (rule, value, callback) => {\r\n      if(!value){\r\n        callback(new Error(\"年龄不能为空\"))\r\n      }else {\r\n        let regular = /^[+]{0,1}(\\d+)$/\r\n        if (regular.test(value)) {\r\n          callback();\r\n        } else {\r\n          callback(new Error(\"请输入大于等于0的正整数\"));\r\n        }\r\n      }\r\n    }\r\n    let validateHelper = (rule, value, callback) => {\r\n      if(!value){\r\n        callback(new Error(\"请选择绑定的督导\"))\r\n      }else {\r\n        callback();\r\n      }\r\n    }\r\n    let validatePhone = (rule, value, callback) => {\r\n      if(!value){\r\n        callback(new Error(\"手机号不能为空\"))\r\n      }else {\r\n        if (/^1[34578]\\d{9}$/.test(value) == false) {\r\n          callback(new Error(\"手机号格式错误\"));\r\n        } else {\r\n          callback();\r\n        }\r\n      }\r\n    }\r\n    let validateIDnumber = (rule, value, callback) => {\r\n      if(!value){\r\n        callback(new Error(\"身份证不能为空\"))\r\n      }else {\r\n        let regular = /^(^[1-9]\\d{7}((0\\d)|(1[0-2]))(([0|1|2]\\d)|3[0-1])\\d{3}$)|(^[1-9]\\d{5}[1-9]\\d{3}((0\\d)|(1[0-2]))(([0|1|2]\\d)|3[0-1])((\\d{4})|\\d{3}[X])$)$/;\r\n        if (regular.test(value)) {\r\n          callback();\r\n        } else {\r\n          callback(new Error('请填写正确的身份证号码'));\r\n        }\r\n      }\r\n    }\r\n    var validateEmail = (rule, value, callback) => {\r\n      if (value === '') {\r\n        callback(new Error('请正确填写邮箱'));\r\n      } else {\r\n        if (value !== '') {\r\n          var reg=/^[A-Za-z0-9\\u4e00-\\u9fa5]+@[a-zA-Z0-9_-]+(\\.[a-zA-Z0-9_-]+)+$/;\r\n          if(!reg.test(value)){\r\n            callback(new Error('请输入有效的邮箱'));\r\n          }\r\n        }\r\n        callback();\r\n      }\r\n    };\r\n    var validateUsername = (rule, value, callback) => {\r\n      if (!value) {\r\n        return callback(new Error('用户名不能为空'));\r\n      }else{\r\n        let regular =  /^[a-zA-Z0-9_]/\r\n        if (regular.test(value)) {\r\n          callback();\r\n        } else {\r\n          callback(new Error(\"用户名只包含英文字母和下划线\"));\r\n        }\r\n      }\r\n    };\r\n    var validatePassword = (rule, value, callback) => {\r\n      if (!value) {\r\n        return callback(new Error('密码不能为空'));\r\n      }else{\r\n        if (value.length < 6) {\r\n          return callback(new Error('输入密码不小于6位'));\r\n        }else {\r\n            callback();\r\n          }\r\n      }\r\n    };\r\n    var validateWork = (rule, value, callback) => {\r\n      if (!value) {\r\n        return callback(new Error('工作单位不能为空'));\r\n      }else{\r\n        callback();\r\n      }\r\n    };\r\n    var validateTitle = (rule, value, callback) => {\r\n      if (!value) {\r\n        return callback(new Error('职称不能为空'));\r\n      }else{\r\n        callback();\r\n      }\r\n    };\r\n    return {\r\n      dialogFormVisible: false,\r\n      dialogFormVisible1: false,\r\n      dialogFormVisible2: false,\r\n      dialogFormVisible3: false,\r\n      form_add: {\r\n        true_name: '',\r\n        gender:'',\r\n        age:'',\r\n        id_number:'',\r\n        phone:'',\r\n        email:'',\r\n        helper:'',\r\n        username:'',\r\n        password:'',\r\n        work:'',\r\n        title:''\r\n      },\r\n      form_change: {\r\n        trueName: '',\r\n        gender:'',\r\n        age:'',\r\n        idNumber:'',\r\n        phone:'',\r\n        email:'',\r\n        username:'',\r\n        password:'',\r\n        work:'',\r\n        title:'',\r\n        qualification:'',\r\n        qualificationId:'',\r\n        bindID:'',\r\n        available:'',\r\n        id:'',\r\n        state:'',\r\n        level:'',\r\n        schedule:'',\r\n        role:'',\r\n        workingTimes:'',\r\n        totalTime:''\r\n      },\r\n      form_schedule: {\r\n        trueName: '',\r\n        gender:'',\r\n        age:'',\r\n        idNumber:'',\r\n        phone:'',\r\n        email:'',\r\n        username:'',\r\n        password:'',\r\n        work:'',\r\n        title:'',\r\n        qualification:'',\r\n        qualificationId:'',\r\n        bindID:'',\r\n        available:'',\r\n        id:'',\r\n        state:'',\r\n        level:'',\r\n        schedule:'',\r\n        role:'',\r\n        workingTimes:'',\r\n        totalTime:''\r\n      },\r\n      schedule_week:[],\r\n      weeks:['周一','周二','周三','周四','周五','周六','周日'],\r\n      form_detail: {\r\n        trueName: '',\r\n        gender:'',\r\n        age:'',\r\n        idNumber:'',\r\n        phone:'',\r\n        email:'',\r\n        helper:'',\r\n        username:'',\r\n        password:'',\r\n        work:'',\r\n        title:''\r\n      },\r\n      rules_add: {\r\n        true_name: [\r\n          {validator: validateTrue_name, trigger:'blur'}\r\n        ],\r\n        gender: [\r\n          {validator: validateGender, trigger:'blur'}\r\n        ],\r\n        age: [\r\n          {validator: validateAge, trigger:'blur'}\r\n        ],\r\n        phone: [\r\n          {validator: validatePhone, trigger:'blur'}\r\n        ],\r\n        id_number: [\r\n          {validator: validateIDnumber, trigger:'blur'}\r\n        ],\r\n        email: [\r\n          {validator: validateEmail, trigger:'blur'}\r\n        ],\r\n        helper: [\r\n          {validator: validateHelper, trigger:'blur'}\r\n        ],\r\n        username: [\r\n          {validator: validateUsername, trigger:'blur'}\r\n        ],\r\n        password: [\r\n          {validator: validatePassword, trigger:'blur'}\r\n        ],\r\n        work: [\r\n          {validator: validateWork, trigger:'blur'}\r\n        ],\r\n        title: [\r\n          {validator: validateTitle, trigger:'blur'}\r\n        ]\r\n      },\r\n      rules_change: {\r\n        trueName: [\r\n          {validator: validateTrue_name, trigger:'blur'}\r\n        ],\r\n        gender: [\r\n          {validator: validateGender, trigger:'blur'}\r\n        ],\r\n        age: [\r\n          {validator: validateAge, trigger:'blur'}\r\n        ],\r\n        phone: [\r\n          {validator: validatePhone, trigger:'blur'}\r\n        ],\r\n        idNumber: [\r\n          {validator: validateIDnumber, trigger:'blur'}\r\n        ],\r\n        email: [\r\n          {validator: validateEmail, trigger:'blur'}\r\n        ],\r\n        bindID: [\r\n          {validator: validateHelper, trigger:'blur'}\r\n        ],\r\n        username: [\r\n          {validator: validateUsername, trigger:'blur'}\r\n        ],\r\n        password: [\r\n          {validator: validatePassword, trigger:'blur'}\r\n        ],\r\n        work: [\r\n          {validator: validateWork, trigger:'blur'}\r\n        ],\r\n        title: [\r\n          {validator: validateTitle, trigger:'blur'}\r\n        ]\r\n      },\r\n      activeName: 'first',\r\n      dictTotal: 0,\r\n      dictCurrentPage: 1,\r\n      dictPageSize: 10,\r\n      tableData: [],\r\n      helper_select:[]\r\n    }\r\n  },\r\n  mounted() {\r\n    this.initData()\r\n  },\r\n  methods: {\r\n    checkSpecialKey(str) {\r\n      var specialKey = \"\\\\;!@#$%^&*()\";\r\n      for (var i = 0; i < str.length; i++) {\r\n        if (specialKey.indexOf(str.substr(i, 1)) != -1) {\r\n          return false;\r\n        }\r\n      }\r\n      return true;\r\n    },\r\n    initData() {\r\n      // this.dictTotal = this.tableData.length\r\n      this.$http({\r\n        url: \"/admin/getWorkerList\",\r\n        method: \"post\",\r\n        crossdomain: true,\r\n        body:JSON.stringify({\r\n          \"role\": 1,\r\n        })\r\n      }).then(res => {\r\n        // console.log(res.data.data);\r\n        this.dictTotal = res.data.data.length;\r\n        this.tableData=res.data.data\r\n      }).catch(err => {\r\n        console.log(err.data)\r\n      });\r\n    },\r\n    add_consultant(formName){\r\n      this.dialogFormVisible=true\r\n      this.getValues()\r\n      this.$refs[formName].resetFields()\r\n    },\r\n    change_consultant(row){\r\n      this.dialogFormVisible1=true\r\n      this.form_change=row\r\n      // console.log(row)\r\n      this.getValues();\r\n      var temp=this.form_change.bindID\r\n      if(temp===' '||temp===null||temp===''){\r\n        this.form_change.bindID=[]\r\n      }else{\r\n        this.form_change.bindID = temp.split(\",\")\r\n      }\r\n      console.log(this.form_change)\r\n    },\r\n    //获取督导列表\r\n    getValues(){\r\n      this.$http({\r\n        url: \"/admin/getWorkerList\",\r\n        method: \"post\",\r\n        crossdomain: true,\r\n        body:JSON.stringify({\r\n          \"role\": 2,\r\n        })\r\n      }).then(res => {\r\n        // console.log(\"c\")\r\n        console.log(res.data.data);\r\n        this.helper_select= res.data.data\r\n      }).catch(err => {\r\n        console.log(err.data)\r\n      });\r\n    },\r\n    //添加咨询师\r\n    submit_add(formName) {\r\n      // console.log(\"c\")\r\n      console.log(this.form_add)\r\n      this.$refs[formName].validate((valid) => {\r\n        if (valid) {\r\n          this.$http({\r\n            url: \"/admin/saveWorker\",\r\n            method: \"post\",\r\n            crossdomain: true,\r\n            headers: {'Content-Type': 'application/json'},\r\n            body:JSON.stringify({\r\n              \"username\": this.form_add.username,\r\n              \"role\": 1,\r\n              \"trueName\": this.form_add.true_name,\r\n              \"gender\":this.form_add.gender,\r\n              \"age\":this.form_add.age,\r\n              \"idNumber\":this.form_add.id_number,\r\n              \"phone\":this.form_add.phone,\r\n              \"email\":this.form_add.email,\r\n              \"bindID\":this.form_add.helper.toString(),\r\n              \"password\":this.form_add.password,\r\n              \"work\":this.form_add.work,\r\n              \"title\":this.form_add.title,\r\n              \"available\":2\r\n            })\r\n          }).then(res => {\r\n            console.log(res);\r\n            alert(\"添加成功\")\r\n            this.dialogFormVisible=false\r\n            this.initData();\r\n          }).catch(err => {\r\n            console.log(err.data)\r\n          });\r\n        } else {\r\n          alert('请输入完整的信息')\r\n          return false\r\n        }\r\n      })\r\n    },\r\n    change_schedule(row) {\r\n      this.dialogFormVisible3=true\r\n      this.form_schedule=row\r\n      var temp=this.form_schedule.schedule\r\n      if(temp===' '||temp===null||temp===''){\r\n        this.schedule_week=[]\r\n      }else{\r\n        this.schedule_week = temp.split(\",\")\r\n      }\r\n      console.log(this.schedule_week)\r\n      console.log(row)\r\n    },\r\n    update_schedule() {\r\n      // var formName=row\r\n      console.log(this.form_schedule)\r\n      console.log(this.schedule_week.toString())\r\n      this.$http({\r\n        url: \"/admin/updateWorker\",\r\n        method: \"post\",\r\n        crossdomain: true,\r\n        headers: {'Content-Type': 'application/json'},\r\n        body:JSON.stringify({\r\n          \"username\": this.form_schedule.username,\r\n          \"role\": this.form_schedule.role,\r\n          \"trueName\": this.form_schedule.trueName,\r\n          \"gender\":this.form_schedule.gender,\r\n          \"age\":this.form_schedule.age,\r\n          \"idNumber\":this.form_schedule.idNumber,\r\n          \"phone\":this.form_schedule.phone,\r\n          \"email\":this.form_schedule.email,\r\n          \"password\":this.form_schedule.password,\r\n          \"work\":this.form_schedule.work,\r\n          \"title\":this.form_schedule.title,\r\n          \"qualification\":this.form_schedule.qualification,\r\n          \"qualificationId\":this.form_schedule.qualificationId,\r\n          \"bindID\":this.form_schedule.bindID,\r\n          \"available\":this.form_schedule.available,\r\n          \"id\":this.form_schedule.id,\r\n          \"state\":this.form_schedule.state,\r\n          \"level\":this.form_schedule.level,\r\n          \"schedule\":this.schedule_week.toString(\",\"),\r\n          \"workingTimes\":this.form_schedule.workingTimes,\r\n          \"totalTime\":this.form_schedule.totalTime\r\n        })\r\n      }).then(res => {\r\n        this.dialogFormVisible3=false\r\n        alert(\"修改成功\")\r\n        this.initData();\r\n      }).catch(err => {\r\n        console.log(err.data)\r\n      });\r\n    },\r\n    //修改咨询师\r\n    submit_change(formName) {\r\n      console.log(this.form_change)\r\n      this.$refs[formName].validate((valid) => {\r\n        if (valid) {\r\n          this.$http({\r\n            url: \"/admin/updateWorker\",\r\n            method: \"post\",\r\n            crossdomain: true,\r\n            headers: {'Content-Type': 'application/json'},\r\n            body:JSON.stringify({\r\n              \"username\": this.form_change.username,\r\n              \"role\": this.form_change.role,\r\n              \"trueName\": this.form_change.trueName,\r\n              \"gender\":this.form_change.gender,\r\n              \"age\":this.form_change.age,\r\n              \"idNumber\":this.form_change.idNumber,\r\n              \"phone\":this.form_change.phone,\r\n              \"email\":this.form_change.email,\r\n              \"password\":this.form_change.password,\r\n              \"work\":this.form_change.work,\r\n              \"title\":this.form_change.title,\r\n              \"qualification\":this.form_change.qualification,\r\n              \"qualificationId\":this.form_change.qualificationId,\r\n              \"bindID\":this.form_change.bindID.toString(),\r\n              \"available\":this.form_change.available,\r\n              \"id\":this.form_change.id,\r\n              \"state\":this.form_change.state,\r\n              \"level\":this.form_change.level,\r\n              \"schedule\":this.form_change.schedule,\r\n              \"workingTimes\":this.form_change.workingTimes,\r\n              \"totalTime\":this.form_change.totalTime\r\n            })\r\n          }).then(res => {\r\n            console.log(res);\r\n            alert(\"修改成功\")\r\n            this.dialogFormVisible1=false\r\n            this.initData();\r\n          }).catch(err => {\r\n            console.log(err.data)\r\n          });\r\n        } else {\r\n          alert('请输入完整的信息')\r\n          return false\r\n        }\r\n      })\r\n    },\r\n\r\n    //取消添加咨询师\r\n    cancel_add(formName) {\r\n      this.dialogFormVisible=false\r\n      this.$refs[formName].resetFields()\r\n    },\r\n    detail(row) {\r\n      this.dialogFormVisible2=true\r\n      this.form_detail=row\r\n    },\r\n    //删除咨询师\r\n    delete_consultant(row) {\r\n      console.log(row)\r\n        this.$http({\r\n          url: \"/admin/deleteWorker\",\r\n          method: \"post\",\r\n          crossdomain: true,\r\n          body:JSON.stringify({\r\n            \"id\": row.id,\r\n          })\r\n        }).then(res => {\r\n          this.initData()\r\n        }).catch(err => {\r\n          console.log(err.data)\r\n        });\r\n    },\r\n    handleClick(tab, event) {\r\n      console.log(tab, event)\r\n    },\r\n    stateFormat(row, column) {\r\n      if (row.level === 0) {\r\n        return ''\r\n      } else if (row.level === 1) {\r\n        return '⭐'\r\n      }else if (row.level === 2) {\r\n        return '⭐⭐'\r\n      } else if (row.level === 3) {\r\n        return '⭐⭐⭐'\r\n      }else if (row.level === 4) {\r\n        return '⭐⭐⭐⭐'\r\n      } else {\r\n        return '⭐⭐⭐⭐⭐'\r\n      }\r\n    },\r\n    async getTrueID(id){\r\n      this.$http({\r\n        url: \"/admin/getWorkerList\",\r\n        method: \"post\",\r\n        crossdomain: true,\r\n        body: JSON.stringify({\r\n          \"id\": id\r\n        })\r\n      }).then(res => {\r\n        console.log(\"c\")\r\n        console.log(res.data.data[0].trueName);\r\n        return  res.data.data[0].trueName\r\n      }).catch(err => {\r\n        console.log(err.data)\r\n      });\r\n    },\r\n    // 设置表头颜色\r\n    headClass() {\r\n      return 'background:#e1e9f4;'\r\n    },\r\n    // 实时监听查询内容，更新列表\r\n    onChange(e) {\r\n      const { value } = e.target\r\n      console.log('检测到变化' + value)\r\n      this.$http({\r\n        url: \"/admin/getWorkerList\",\r\n        method: \"post\",\r\n        crossdomain: true,\r\n        body:JSON.stringify({\r\n          \"trueName\": value,\r\n          \"role\":1\r\n        })\r\n      }).then(res => {\r\n        console.log(res.data.data);\r\n        this.dictTotal = res.data.data.length;\r\n        this.tableData=res.data.data\r\n      }).catch(err => {\r\n        console.log(err.data)\r\n      });\r\n    },\r\n    applicantTypes(value){\r\n      console.log(this.helper_select)\r\n      this.helper_select.forEach(item => {\r\n        if(item.id===value){\r\n          console.log(item)\r\n          this.form_change.bindID = item.label\r\n        }\r\n      })\r\n    }\r\n  }\r\n}\r\n</script>\r\n\r\n<style lang=\"scss\" scoped>\r\ninput[type=\"text\"],#btn1,#btn2{\r\n  box-sizing: border-box;\r\n  text-align:left;\r\n  font-size:1em;\r\n  height:2.5em;\r\n  border-radius:4px;\r\n  border:1px solid #c8cccf;\r\n  color:#6a6f77;\r\n  -web-kit-appearance:none;\r\n  -moz-appearance: none;\r\n  display:block;\r\n  outline:0;\r\n  padding:0 1em;\r\n  text-decoration:none;\r\n  width:20%;\r\n}\r\ninput[type=\"text\"]:focus{\r\n  border:1px solid #5498e5;\r\n}\r\n.page {\r\n  height: 95%;\r\n  position: relative;\r\n  margin-top: 20px;\r\n  .search{\r\n    margin-left: 1%;\r\n    text-align: left;\r\n    .item{\r\n      position: relative;\r\n      margin-top: 10px;\r\n      margin-bottom: 10px;\r\n      .button{\r\n        position: relative;\r\n        left: 91%\r\n      }\r\n    }\r\n  }\r\n  .table{\r\n    width: 98%;\r\n    margin: 0 auto;\r\n    height: 88%;\r\n    .fy {\r\n      height: 10%;\r\n      position: absolute;\r\n      margin-top: 20px;\r\n      right: 10px;\r\n    }\r\n  }\r\n}\r\n</style>\r\n"]}]}