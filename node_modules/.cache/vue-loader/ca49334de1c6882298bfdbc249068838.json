{"remainingRequest":"D:\\project\\softwareDevelopment\\IM-Web\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!D:\\project\\softwareDevelopment\\IM-Web\\src\\views\\helper\\frontpage.vue?vue&type=script&lang=js&","dependencies":[{"path":"D:\\project\\softwareDevelopment\\IM-Web\\src\\views\\helper\\frontpage.vue","mtime":1649755430982},{"path":"D:\\project\\softwareDevelopment\\IM-Web\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1649851454799},{"path":"D:\\project\\softwareDevelopment\\IM-Web\\node_modules\\babel-loader\\lib\\index.js","mtime":1649851455045},{"path":"D:\\project\\softwareDevelopment\\IM-Web\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1649851454799},{"path":"D:\\project\\softwareDevelopment\\IM-Web\\node_modules\\vue-loader\\lib\\index.js","mtime":1649851455309}],"contextDependencies":[],"result":["//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n\nimport * as echarts from 'echarts'\nexport default {\n  data() {\n    return {\n      information:{\n\n      },\n      value: new Date(),\n      isToday:false,\n      all_consultant_online:'',\n      consultant_number: '35',\n      consultant_time: '60:30:23',\n      total:0,  //总数据条数\n      currentpage:1,  //当前所在页默认是第一页\n      pagesize:12,  //每页显示多少行数据 默认设置为10\n      ticket:[],  //这里是从后端获取的所有数据\n      pageTicket:[],//分页后的当前页数据\n      tableData: [],\n      dictTotal: 0,\n      dictCurrentPage: 1,\n      dictPageSize: 5,\n    }\n  },\n  mounted() {\n    this.initData()\n    this.getConsultantList()\n  },\n  created() {\n    this.initData()\n  },\n  methods: {\n    initData(){\n      this.$http({\n        url: \"/admin/getWorkerList\",\n        method: \"post\",\n        crossdomain: true,\n        body:JSON.stringify({\n          \"id\": this.$store.state.userid,\n        })\n      }).then(res => {\n        console.log(res.data.data);\n        this.information=res.data.data[0]\n      }).catch(err => {\n        console.log(err.data)\n      });\n      this.$http({\n        url: \"/record/getRecordList\",\n        method: \"post\",\n        crossdomain: true,\n        body:JSON.stringify({\n          \"helperID\": this.$store.state.userid,\n        })\n      }).then(res => {\n        console.log(res.data.data);\n        this.dictTotal = res.data.data.length;\n        this.tableData=res.data.data\n      }).catch(err => {\n        console.log(err.data)\n      });\n    },\n    my_day(v) {\n      var week=new Date(v).getDay();\n      var weekString=''\n      switch (week){\n        case 0:\n          weekString=\"周日\"\n          break\n        case 1:\n          weekString=\"周一\"\n          break\n        case 2:\n          weekString=\"周二\"\n          break\n        case 3:\n          weekString=\"周三\"\n          break\n        case 4:\n          weekString=\"周四\"\n          break\n        case 5:\n          weekString=\"周五\"\n          break\n        case 6:\n          weekString=\"周六\"\n          break\n        default:\n          break\n      }\n      console.log(\"d\")\n      // console.log(res.data);\n      var res=\"\"\n      var temp=this.$store.state.schedule\n      console.log(temp)\n      var reg = new RegExp(weekString);\n      //如果字符串中不包含目标字符会返回-1\n      if(temp.match(reg)){\n        console.log(\"zhenggque\")\n        this.isToday=true\n        return '班'\n      }else {\n        this.isToday=false\n        return '休'\n      }\n    },\n\n    getConsultantList(){\n      this.$http({\n        url: \"/admin/getWorkerList\",\n        method: \"post\",\n        crossdomain: true,\n        body:JSON.stringify({\n          \"role\": 2,\n        })\n      }).then(res => {\n        console.log(this.$store.state.userid)\n        console.log(res.data.data);\n        this.total = res.data.data.length;\n        this.ticket=res.data.data\n        var count=0;\n        for(let i=0;i<this.total;i++){\n          if(this.ticket[i].available==1){\n            count++\n          }\n        }\n        this.all_consultant_online=count\n        this.getPageInfo();\n      }).catch(err => {\n        console.log(err.data)\n      });\n    },\n    getPageInfo(){\n      //清空pageTicket中的数据\n      this.pageTicket=[];\n      // 获取当前页的数据\n      for(let i=(this.currentpage-1)*this.pagesize;i<this.total;i++){\n        //把遍历的数据添加到pageTicket里面\n        this.pageTicket.push(this.ticket[i]);\n        //判断是否达到一页的要求\n        if(this.pageTicket.length===this.pagesize) break;\n      }\n    },\n    goDetail(){\n      this.$router.replace('/consultant/record')\n    },\n    handleSizeChange(size){\n      //修改当前每页的数据行数\n      this.pagesize=size;\n      //数据重新分页\n      this.getPageInfo();\n    },\n    //调整当前的页码\n    handleCurrentChange(pageNumber){\n      //修改当前的页码\n      this.currentpage=pageNumber;\n      //数据重新分页\n      this.getPageInfo()\n    },\n    stateFormat(row, column) {\n      if (row.level == 0) {\n        return ''\n      } else if (row.level < 1||row.level==1) {\n        return '⭐'\n      }else if (row.level < 2||row.level==2) {\n        return '⭐⭐'\n      } else if (row.level < 3||row.level==3) {\n        return '⭐⭐⭐'\n      }else if (row.level < 4||row.level==4) {\n        return '⭐⭐⭐⭐'\n      } else if(row.level<5||row.level==5){\n        return '⭐⭐⭐⭐⭐'\n      }\n    },\n  }\n}\n",{"version":3,"sources":["frontpage.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA4FA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"frontpage.vue","sourceRoot":"src/views/helper","sourcesContent":["<template>\n  <div class=\"page\">\n    <div class=\"div-1\">\n      <div class=\"left\">\n        <div class=\"des\">\n          <div style=\"width: 28%;height: 49%;position: absolute;left: 0;text-align: center;color: grey\">\n            <div style=\"width: 100%;height: 100%;background-color: white\">\n              <el-avatar style=\"width: 80px;height: 80px;margin-top: 5px\" src=\"https://cube.elemecdn.com/0/88/03b0d39583f48206768a7534e55bcpng.png\"></el-avatar>\n              <div style=\"margin-top: 5px\">督导</div>\n              <div style=\"margin-top: 15px\">{{ information.trueName }}</div>\n              <div style=\"margin-top: 15px\">{{ information.age }}岁</div>\n            </div>\n          </div>\n          <div style=\"width: 25%;height: 49%;position: absolute;left: 30%;text-align: center;color: grey;background-color: white\">\n            <div style=\"margin-top: 60px\">总咨询数<div style=\"font-size: 3em;margin-top: 20px;color: #445974;\">{{ information.workingTimes }}</div>\n            </div>\n          </div>\n          <div style=\"width: 45%;height: 49%;position: absolute;right: 0;text-align: center;color: grey;background-color: white\">\n            <div style=\"margin-top: 60px\">总咨询时长<div style=\"font-size: 3em;margin-top: 20px;color: #445974;border-left: 1px solid grey\">{{ information.totalTime }}</div>\n            </div>\n          </div>\n        </div>\n        <div class=\"list\">\n          <div class=\"left\" style=\"width: 68%;position: absolute\">\n            <div style=\"float:left;width: 30%;font-size: 17px;height: 30px;margin-top: 10px;margin-left: 10px;color: #2b2f3a\">咨询师</div>\n            <div style=\"text-align: right;font-size: 30px;margin-top: 5px\">\n              <el-pagination\n                background\n                @size-change=\"handleSizeChange\"\n                @current-change=\"handleCurrentChange\"\n                :current-page=\"currentpage\"\n                :page-size=\"pagesize\"\n                layout=\"total, prev, pager, next\"\n                :total=\"total\">\n              </el-pagination>\n            </div>\n            <div>\n              <el-row :gutter=\"24\">\n                <el-col :span=\"8\" v-for=\"(item, index) in pageTicket\" :key=\"item\" style=\"border:1px solid #c8cccf;\">\n                  <div style=\"height:33px;display: inline-block;width: 100%;margin-top: 10px;font-size: 18px;line-height: 34px;\">\n                    <div style=\"display: inline-block;width: 60%;margin-left: 10px;color: grey\">{{ item.trueName }}</div>\n                    <div v-if=\"item.available==1\" style=\"display: inline-block;width: 30%;height:80%;background-color: #a3e0a3;text-align: center;color: white\">在线</div>\n                    <div v-if=\"item.available==2\" style=\"display: inline-block;width: 30%;height:80%;background-color: #c1bebe;text-align: center;color: white\">下线</div>\n                  </div>\n                </el-col>\n              </el-row>\n            </div>\n          </div>\n          <div style=\"width: 30%;height: 50%;background-color: #404e5e;position: absolute;right: 0px;text-align: center;color: white;padding-top: 10%\">\n            <div style=\"font-size: 20px;\">在线咨询师</div>\n            <div style=\"font-size: 55px;margin-top: 20px\">{{all_consultant_online}}</div>\n          </div>\n        </div>\n      </div>\n      <div class=\"right\">\n        <el-calendar v-model=\"value\" class=\"calender\"\n                     :first-day-of-week=\"7\"\n        >\n          <template slot=\"dateCell\" slot-scope=\"{date, data}\">\n            <div>\n              <p style=\"text-align: left;margin: 0px\">{{ data.day.split('-').slice(2).join('-') }}</p>\n              <p v-if=\"my_day(data.day)=='班'\" style=\"font-size: 10px;margin-left: 20px;line-height: 20px;color: red\">\n                班<br>\n              </p>\n              <p v-if=\"my_day(data.day)=='休'\" style=\"font-size: 10px;margin-left: 20px;line-height: 20px;color: #6363ea\">\n                休<br>\n              </p>\n            </div>\n          </template>\n        </el-calendar>\n      </div>\n    </div>\n    <div class=\"div-2\">\n      <div style=\"border-left: 1px solid grey\">\n        <div style=\"position: absolute;left: 0px;margin-left: 15px;margin-top: 10px\">咨询记录</div>\n        <div style=\"right: 0px;position: absolute;margin-right: 15px;margin-top: 10px;color: #0086b3;cursor: pointer\" @click=\"goDetail\">查看更多</div>\n      </div>\n      <div class=\"table\" style=\"position: absolute;margin-top: 30px;width: 100%;height: 90%\">\n        <el-table :data=\"tableData.slice((dictCurrentPage-1)*dictPageSize,dictCurrentPage*dictPageSize)\" style=\"overflow:auto;width:100%;\" height=\"90%\" :header-cell-style=\"headClass\">\n          <el-table-column prop=\"customerTrueName\" label=\"访客\" fixed />\n          <el-table-column prop=\"date\" label=\"日期\" />\n          <el-table-column prop=\"startTime\" label=\"开始时间\" />\n          <el-table-column prop=\"endTime\" label=\"结束时间\" />\n          <el-table-column prop=\"consultantTrueName\" label=\"咨询师\" />\n          <el-table-column prop=\"level\" label=\"平均咨询等级\" :formatter=\"stateFormat\"/>\n        </el-table>\n      </div>\n    </div>\n  </div>\n</template>\n\n<script>\nimport * as echarts from 'echarts'\nexport default {\n  data() {\n    return {\n      information:{\n\n      },\n      value: new Date(),\n      isToday:false,\n      all_consultant_online:'',\n      consultant_number: '35',\n      consultant_time: '60:30:23',\n      total:0,  //总数据条数\n      currentpage:1,  //当前所在页默认是第一页\n      pagesize:12,  //每页显示多少行数据 默认设置为10\n      ticket:[],  //这里是从后端获取的所有数据\n      pageTicket:[],//分页后的当前页数据\n      tableData: [],\n      dictTotal: 0,\n      dictCurrentPage: 1,\n      dictPageSize: 5,\n    }\n  },\n  mounted() {\n    this.initData()\n    this.getConsultantList()\n  },\n  created() {\n    this.initData()\n  },\n  methods: {\n    initData(){\n      this.$http({\n        url: \"/admin/getWorkerList\",\n        method: \"post\",\n        crossdomain: true,\n        body:JSON.stringify({\n          \"id\": this.$store.state.userid,\n        })\n      }).then(res => {\n        console.log(res.data.data);\n        this.information=res.data.data[0]\n      }).catch(err => {\n        console.log(err.data)\n      });\n      this.$http({\n        url: \"/record/getRecordList\",\n        method: \"post\",\n        crossdomain: true,\n        body:JSON.stringify({\n          \"helperID\": this.$store.state.userid,\n        })\n      }).then(res => {\n        console.log(res.data.data);\n        this.dictTotal = res.data.data.length;\n        this.tableData=res.data.data\n      }).catch(err => {\n        console.log(err.data)\n      });\n    },\n    my_day(v) {\n      var week=new Date(v).getDay();\n      var weekString=''\n      switch (week){\n        case 0:\n          weekString=\"周日\"\n          break\n        case 1:\n          weekString=\"周一\"\n          break\n        case 2:\n          weekString=\"周二\"\n          break\n        case 3:\n          weekString=\"周三\"\n          break\n        case 4:\n          weekString=\"周四\"\n          break\n        case 5:\n          weekString=\"周五\"\n          break\n        case 6:\n          weekString=\"周六\"\n          break\n        default:\n          break\n      }\n      console.log(\"d\")\n      // console.log(res.data);\n      var res=\"\"\n      var temp=this.$store.state.schedule\n      console.log(temp)\n      var reg = new RegExp(weekString);\n      //如果字符串中不包含目标字符会返回-1\n      if(temp.match(reg)){\n        console.log(\"zhenggque\")\n        this.isToday=true\n        return '班'\n      }else {\n        this.isToday=false\n        return '休'\n      }\n    },\n\n    getConsultantList(){\n      this.$http({\n        url: \"/admin/getWorkerList\",\n        method: \"post\",\n        crossdomain: true,\n        body:JSON.stringify({\n          \"role\": 2,\n        })\n      }).then(res => {\n        console.log(this.$store.state.userid)\n        console.log(res.data.data);\n        this.total = res.data.data.length;\n        this.ticket=res.data.data\n        var count=0;\n        for(let i=0;i<this.total;i++){\n          if(this.ticket[i].available==1){\n            count++\n          }\n        }\n        this.all_consultant_online=count\n        this.getPageInfo();\n      }).catch(err => {\n        console.log(err.data)\n      });\n    },\n    getPageInfo(){\n      //清空pageTicket中的数据\n      this.pageTicket=[];\n      // 获取当前页的数据\n      for(let i=(this.currentpage-1)*this.pagesize;i<this.total;i++){\n        //把遍历的数据添加到pageTicket里面\n        this.pageTicket.push(this.ticket[i]);\n        //判断是否达到一页的要求\n        if(this.pageTicket.length===this.pagesize) break;\n      }\n    },\n    goDetail(){\n      this.$router.replace('/consultant/record')\n    },\n    handleSizeChange(size){\n      //修改当前每页的数据行数\n      this.pagesize=size;\n      //数据重新分页\n      this.getPageInfo();\n    },\n    //调整当前的页码\n    handleCurrentChange(pageNumber){\n      //修改当前的页码\n      this.currentpage=pageNumber;\n      //数据重新分页\n      this.getPageInfo()\n    },\n    stateFormat(row, column) {\n      if (row.level == 0) {\n        return ''\n      } else if (row.level < 1||row.level==1) {\n        return '⭐'\n      }else if (row.level < 2||row.level==2) {\n        return '⭐⭐'\n      } else if (row.level < 3||row.level==3) {\n        return '⭐⭐⭐'\n      }else if (row.level < 4||row.level==4) {\n        return '⭐⭐⭐⭐'\n      } else if(row.level<5||row.level==5){\n        return '⭐⭐⭐⭐⭐'\n      }\n    },\n  }\n}\n</script>\n\n<style scoped lang=\"scss\">\n.page{\n  height: 96%;\n  margin: 1%;\n  .div-1{\n    position: relative;\n    width: 100%;\n    height: 70%;\n    .left{\n      position: absolute;\n      width: 60%;\n      height: 90%;\n      margin-top: 0.8%;\n      overflow: hidden;\n      .des{\n        //position: absolute;\n        height: 49%;\n        width: 100%;\n      }\n      .list{\n        //position: absolute;\n        margin-top: 1%;\n        width: 100%;\n        height: 60%;\n        background-color: white;\n        overflow: hidden;\n      }\n    }\n    .right{\n      position: absolute;\n      background-color: white;\n      right: 0;\n      width: 39%;\n      height: 90%;\n      margin-top: 0.8%;\n      overflow: auto;\n      .calender{\n        width: 100%;\n        height: 100%;\n        font-size: 20px;\n      }\n    }\n  }\n  .div-2{\n    position: relative;\n    width: 100%;\n    height: 30%;\n    background-color: white;\n  }\n}\n</style>\n"]}]}