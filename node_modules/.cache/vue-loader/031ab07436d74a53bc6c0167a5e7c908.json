{"remainingRequest":"D:\\project\\softwareDevelopment\\IM-Web\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!D:\\project\\softwareDevelopment\\IM-Web\\src\\views\\consultant\\frontpage.vue?vue&type=script&lang=js&","dependencies":[{"path":"D:\\project\\softwareDevelopment\\IM-Web\\src\\views\\consultant\\frontpage.vue","mtime":1649835335738},{"path":"D:\\project\\softwareDevelopment\\IM-Web\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1649851454799},{"path":"D:\\project\\softwareDevelopment\\IM-Web\\node_modules\\babel-loader\\lib\\index.js","mtime":1649851455045},{"path":"D:\\project\\softwareDevelopment\\IM-Web\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1649851454799},{"path":"D:\\project\\softwareDevelopment\\IM-Web\\node_modules\\vue-loader\\lib\\index.js","mtime":1649851455309}],"contextDependencies":[],"result":["//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n\r\nimport * as echarts from 'echarts'\r\nexport default {\r\n  data() {\r\n    return {\r\n      information:{},\r\n      value: new Date(),\r\n      isToday:false,\r\n      all_consultant_online:'',\r\n      consultant_number: '35',\r\n      consultant_time: '60:30:23',\r\n      total:0,  //总数据条数\r\n      currentpage:1,  //当前所在页默认是第一页\r\n      pagesize:12,  //每页显示多少行数据 默认设置为10\r\n      ticket:[],  //这里是从后端获取的所有数据\r\n      pageTicket:[],//分页后的当前页数据\r\n      tableData: [],\r\n      dictTotal: 0,\r\n      dictCurrentPage: 1,\r\n      dictPageSize: 5,\r\n    }\r\n  },\r\n  mounted() {\r\n    this.initData()\r\n    this.getConsultantList()\r\n  },\r\n  created() {\r\n    this.initData()\r\n  },\r\n  methods: {\r\n    initData(){\r\n      this.$http({\r\n        url: \"/admin/getWorkerList\",\r\n        method: \"post\",\r\n        crossdomain: true,\r\n        body:JSON.stringify({\r\n          \"id\": this.$store.state.userid,\r\n        })\r\n      }).then(res => {\r\n        console.log(\"ces\")\r\n        console.log(res.data.data);\r\n        this.information=res.data.data[0]\r\n      }).catch(err => {\r\n        console.log(err.data)\r\n      });\r\n      this.$http({\r\n        url: \"/record/getRecordList\",\r\n        method: \"post\",\r\n        crossdomain: true,\r\n        body:JSON.stringify({\r\n          // \"role\": 0,\r\n          \"consultantID\": this.$store.state.userid,\r\n\r\n        })\r\n      }).then(res => {\r\n        console.log(res.data.data);\r\n        this.dictTotal = res.data.data.length;\r\n        this.tableData=res.data.data\r\n      }).catch(err => {\r\n        console.log(err.data)\r\n      });\r\n    },\r\n    my_day(v) {\r\n      var week=new Date(v).getDay();\r\n      var weekString=''\r\n      switch (week){\r\n        case 0:\r\n          weekString=\"周日\"\r\n          break\r\n        case 1:\r\n          weekString=\"周一\"\r\n          break\r\n        case 2:\r\n          weekString=\"周二\"\r\n          break\r\n        case 3:\r\n          weekString=\"周三\"\r\n          break\r\n        case 4:\r\n          weekString=\"周四\"\r\n          break\r\n        case 5:\r\n          weekString=\"周五\"\r\n          break\r\n        case 6:\r\n          weekString=\"周六\"\r\n          break\r\n        default:\r\n          break\r\n      }\r\n      console.log(\"d\")\r\n      // console.log(res.data);\r\n      var res=\"\"\r\n      var temp=this.$store.state.schedule\r\n      console.log(temp)\r\n      var reg = new RegExp(weekString);\r\n      //如果字符串中不包含目标字符会返回-1\r\n      if(temp.match(reg)){\r\n        console.log(\"zhenggque\")\r\n        this.isToday=true\r\n        return '班'\r\n      }else {\r\n        this.isToday=false\r\n        return '休'\r\n      }\r\n    },\r\n\r\n    getConsultantList(){\r\n      this.$http({\r\n        url: \"/admin/getWorkerList\",\r\n        method: \"post\",\r\n        crossdomain: true,\r\n        body:JSON.stringify({\r\n          \"role\": 1,\r\n        })\r\n      }).then(res => {\r\n        console.log(this.$store.state.userid)\r\n        console.log(res.data.data);\r\n        this.total = res.data.data.length;\r\n        this.ticket=res.data.data\r\n        var count=0;\r\n        for(let i=0;i<this.total;i++){\r\n          if(this.ticket[i].available==1){\r\n            count++\r\n          }\r\n        }\r\n        this.all_consultant_online=count\r\n        this.getPageInfo();\r\n      }).catch(err => {\r\n        console.log(err.data)\r\n      });\r\n    },\r\n    getPageInfo(){\r\n      //清空pageTicket中的数据\r\n      this.pageTicket=[];\r\n      // 获取当前页的数据\r\n      for(let i=(this.currentpage-1)*this.pagesize;i<this.total;i++){\r\n        //把遍历的数据添加到pageTicket里面\r\n        this.pageTicket.push(this.ticket[i]);\r\n        //判断是否达到一页的要求\r\n        if(this.pageTicket.length===this.pagesize) break;\r\n      }\r\n    },\r\n    goDetail(){\r\n      this.$router.replace('/consultant/record')\r\n    },\r\n    handleSizeChange(size){\r\n      //修改当前每页的数据行数\r\n      this.pagesize=size;\r\n      //数据重新分页\r\n      this.getPageInfo();\r\n    },\r\n    //调整当前的页码\r\n    handleCurrentChange(pageNumber){\r\n      //修改当前的页码\r\n      this.currentpage=pageNumber;\r\n      //数据重新分页\r\n      this.getPageInfo()\r\n    },\r\n    stateFormat(row, column) {\r\n      if (row.level == 0) {\r\n        return ''\r\n      } else if (row.level < 1||row.level==1) {\r\n        return '⭐'\r\n      }else if (row.level < 2||row.level==2) {\r\n        return '⭐⭐'\r\n      } else if (row.level < 3||row.level==3) {\r\n        return '⭐⭐⭐'\r\n      }else if (row.level < 4||row.level==4) {\r\n        return '⭐⭐⭐⭐'\r\n      } else if(row.level<5||row.level==5){\r\n        return '⭐⭐⭐⭐⭐'\r\n      }\r\n    },\r\n  }\r\n}\r\n",{"version":3,"sources":["frontpage.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAkGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"frontpage.vue","sourceRoot":"src/views/consultant","sourcesContent":["<template>\r\n  <div class=\"page\">\r\n    <div class=\"div-1\">\r\n      <div class=\"left\">\r\n        <div class=\"des\">\r\n          <div style=\"width: 28%;height: 49%;position: absolute;left: 0;text-align: center;color: grey\">\r\n            <div style=\"width: 100%;height: 100%;background-color: white\">\r\n              <el-avatar style=\"width: 80px;height: 80px;margin-top: 5px\" src=\"https://cube.elemecdn.com/0/88/03b0d39583f48206768a7534e55bcpng.png\"></el-avatar>\r\n              <div style=\"margin-top: 5px\">咨询师</div>\r\n              <div style=\"margin-top: 5px\">{{ information.trueName }}</div>\r\n              <div style=\"margin-top: 5px\">{{ information.age }}岁</div>\r\n              <div v-if=\"information.level==0\" style=\"margin-top: 5px\"></div>\r\n              <div v-if=\"information.level==1\" style=\"margin-top: 5px\">⭐</div>\r\n              <div v-if=\"information.level==2\" style=\"margin-top: 5px\">⭐⭐</div>\r\n              <div v-if=\"information.level==3\" style=\"margin-top: 5px\">⭐⭐⭐</div>\r\n              <div v-if=\"information.level==4\" style=\"margin-top: 5px\">⭐⭐⭐⭐</div>\r\n              <div v-if=\"information.level==5\" style=\"margin-top: 5px\">⭐⭐⭐⭐⭐</div>\r\n            </div>\r\n          </div>\r\n          <div style=\"width: 25%;height: 49%;position: absolute;left: 30%;text-align: center;color: grey;background-color: white\">\r\n            <div style=\"margin-top: 60px\">总咨询数<div style=\"font-size: 3em;margin-top: 20px;color: #445974;\">{{ information.workingTimes }}</div>\r\n            </div>\r\n          </div>\r\n          <div style=\"width: 45%;height: 49%;position: absolute;right: 0;text-align: center;color: grey;background-color: white\">\r\n            <div style=\"margin-top: 60px\">总咨询时长<div style=\"font-size: 3em;margin-top: 20px;color: #445974;border-left: 1px solid grey\">{{ information.totalTime }}</div>\r\n            </div>\r\n          </div>\r\n        </div>\r\n        <div class=\"list\">\r\n          <div class=\"left\" style=\"width: 68%;position: absolute\">\r\n            <div style=\"float:left;width: 30%;font-size: 17px;height: 30px;margin-top: 10px;margin-left: 10px;color: #2b2f3a\">咨询师</div>\r\n            <div style=\"text-align: right;font-size: 30px;margin-top: 5px\">\r\n              <el-pagination\r\n                background\r\n                @size-change=\"handleSizeChange\"\r\n                @current-change=\"handleCurrentChange\"\r\n                :current-page=\"currentpage\"\r\n                :page-size=\"pagesize\"\r\n                layout=\"total, prev, pager, next\"\r\n                :total=\"total\">\r\n              </el-pagination>\r\n            </div>\r\n            <div>\r\n              <el-row :gutter=\"24\">\r\n                <el-col :span=\"8\" v-for=\"(item, index) in pageTicket\" :key=\"item\" style=\"border:1px solid #c8cccf;\">\r\n                  <div style=\"height:33px;display: inline-block;width: 100%;margin-top: 10px;font-size: 18px;line-height: 34px;\">\r\n                    <div style=\"display: inline-block;width: 60%;margin-left: 10px;color: grey\">{{ item.trueName }}</div>\r\n                    <div v-if=\"item.available==1\" style=\"display: inline-block;width: 30%;height:80%;background-color: #a3e0a3;text-align: center;color: white\">在线</div>\r\n                    <div v-if=\"item.available==2\" style=\"display: inline-block;width: 30%;height:80%;background-color: #c1bebe;text-align: center;color: white\">下线</div>\r\n                  </div>\r\n                </el-col>\r\n              </el-row>\r\n            </div>\r\n          </div>\r\n          <div style=\"width: 30%;height: 50%;background-color: #404e5e;position: absolute;right: 0px;text-align: center;color: white;padding-top: 10%\">\r\n            <div style=\"font-size: 20px;\">在线咨询师</div>\r\n            <div style=\"font-size: 55px;margin-top: 20px\">{{all_consultant_online}}</div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n      <div class=\"right\">\r\n        <el-calendar v-model=\"value\" class=\"calender\"\r\n                     :first-day-of-week=\"7\"\r\n        >\r\n          <template slot=\"dateCell\" slot-scope=\"{date, data}\">\r\n            <div>\r\n              <p style=\"text-align: left;margin: 0px\">{{ data.day.split('-').slice(2).join('-') }}</p>\r\n              <p v-if=\"my_day(data.day)=='班'\" style=\"font-size: 10px;margin-left: 20px;line-height: 20px;color: red\">\r\n                班<br>\r\n              </p>\r\n              <p v-if=\"my_day(data.day)=='休'\" style=\"font-size: 10px;margin-left: 20px;line-height: 20px;color: #6363ea\">\r\n                休<br>\r\n              </p>\r\n            </div>\r\n          </template>\r\n        </el-calendar>\r\n      </div>\r\n    </div>\r\n    <div class=\"div-2\">\r\n      <div style=\"border-left: 1px solid grey\">\r\n        <div style=\"position: absolute;left: 0px;margin-left: 15px;margin-top: 10px\">咨询记录</div>\r\n        <div style=\"right: 0px;position: absolute;margin-right: 15px;margin-top: 10px;color: #0086b3;cursor: pointer\" @click=\"goDetail\">查看更多</div>\r\n      </div>\r\n      <div class=\"table\" style=\"position: absolute;margin-top: 30px;width: 100%;height: 90%\">\r\n        <el-table :data=\"tableData.slice((dictCurrentPage-1)*dictPageSize,dictCurrentPage*dictPageSize)\" style=\"overflow:auto;width:100%;\" height=\"90%\" :header-cell-style=\"headClass\">\r\n          <el-table-column prop=\"customerTrueName\" label=\"访客\" fixed />\r\n          <el-table-column prop=\"date\" label=\"日期\" />\r\n          <el-table-column prop=\"startTime\" label=\"开始时间\" />\r\n          <el-table-column prop=\"endTime\" label=\"结束时间\" />\r\n          <el-table-column prop=\"helperTrueName\" label=\"求助督导\" />\r\n          <el-table-column prop=\"level\" label=\"平均咨询等级\" :formatter=\"stateFormat\"/>\r\n        </el-table>\r\n      </div>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport * as echarts from 'echarts'\r\nexport default {\r\n  data() {\r\n    return {\r\n      information:{},\r\n      value: new Date(),\r\n      isToday:false,\r\n      all_consultant_online:'',\r\n      consultant_number: '35',\r\n      consultant_time: '60:30:23',\r\n      total:0,  //总数据条数\r\n      currentpage:1,  //当前所在页默认是第一页\r\n      pagesize:12,  //每页显示多少行数据 默认设置为10\r\n      ticket:[],  //这里是从后端获取的所有数据\r\n      pageTicket:[],//分页后的当前页数据\r\n      tableData: [],\r\n      dictTotal: 0,\r\n      dictCurrentPage: 1,\r\n      dictPageSize: 5,\r\n    }\r\n  },\r\n  mounted() {\r\n    this.initData()\r\n    this.getConsultantList()\r\n  },\r\n  created() {\r\n    this.initData()\r\n  },\r\n  methods: {\r\n    initData(){\r\n      this.$http({\r\n        url: \"/admin/getWorkerList\",\r\n        method: \"post\",\r\n        crossdomain: true,\r\n        body:JSON.stringify({\r\n          \"id\": this.$store.state.userid,\r\n        })\r\n      }).then(res => {\r\n        console.log(\"ces\")\r\n        console.log(res.data.data);\r\n        this.information=res.data.data[0]\r\n      }).catch(err => {\r\n        console.log(err.data)\r\n      });\r\n      this.$http({\r\n        url: \"/record/getRecordList\",\r\n        method: \"post\",\r\n        crossdomain: true,\r\n        body:JSON.stringify({\r\n          // \"role\": 0,\r\n          \"consultantID\": this.$store.state.userid,\r\n\r\n        })\r\n      }).then(res => {\r\n        console.log(res.data.data);\r\n        this.dictTotal = res.data.data.length;\r\n        this.tableData=res.data.data\r\n      }).catch(err => {\r\n        console.log(err.data)\r\n      });\r\n    },\r\n    my_day(v) {\r\n      var week=new Date(v).getDay();\r\n      var weekString=''\r\n      switch (week){\r\n        case 0:\r\n          weekString=\"周日\"\r\n          break\r\n        case 1:\r\n          weekString=\"周一\"\r\n          break\r\n        case 2:\r\n          weekString=\"周二\"\r\n          break\r\n        case 3:\r\n          weekString=\"周三\"\r\n          break\r\n        case 4:\r\n          weekString=\"周四\"\r\n          break\r\n        case 5:\r\n          weekString=\"周五\"\r\n          break\r\n        case 6:\r\n          weekString=\"周六\"\r\n          break\r\n        default:\r\n          break\r\n      }\r\n      console.log(\"d\")\r\n      // console.log(res.data);\r\n      var res=\"\"\r\n      var temp=this.$store.state.schedule\r\n      console.log(temp)\r\n      var reg = new RegExp(weekString);\r\n      //如果字符串中不包含目标字符会返回-1\r\n      if(temp.match(reg)){\r\n        console.log(\"zhenggque\")\r\n        this.isToday=true\r\n        return '班'\r\n      }else {\r\n        this.isToday=false\r\n        return '休'\r\n      }\r\n    },\r\n\r\n    getConsultantList(){\r\n      this.$http({\r\n        url: \"/admin/getWorkerList\",\r\n        method: \"post\",\r\n        crossdomain: true,\r\n        body:JSON.stringify({\r\n          \"role\": 1,\r\n        })\r\n      }).then(res => {\r\n        console.log(this.$store.state.userid)\r\n        console.log(res.data.data);\r\n        this.total = res.data.data.length;\r\n        this.ticket=res.data.data\r\n        var count=0;\r\n        for(let i=0;i<this.total;i++){\r\n          if(this.ticket[i].available==1){\r\n            count++\r\n          }\r\n        }\r\n        this.all_consultant_online=count\r\n        this.getPageInfo();\r\n      }).catch(err => {\r\n        console.log(err.data)\r\n      });\r\n    },\r\n    getPageInfo(){\r\n      //清空pageTicket中的数据\r\n      this.pageTicket=[];\r\n      // 获取当前页的数据\r\n      for(let i=(this.currentpage-1)*this.pagesize;i<this.total;i++){\r\n        //把遍历的数据添加到pageTicket里面\r\n        this.pageTicket.push(this.ticket[i]);\r\n        //判断是否达到一页的要求\r\n        if(this.pageTicket.length===this.pagesize) break;\r\n      }\r\n    },\r\n    goDetail(){\r\n      this.$router.replace('/consultant/record')\r\n    },\r\n    handleSizeChange(size){\r\n      //修改当前每页的数据行数\r\n      this.pagesize=size;\r\n      //数据重新分页\r\n      this.getPageInfo();\r\n    },\r\n    //调整当前的页码\r\n    handleCurrentChange(pageNumber){\r\n      //修改当前的页码\r\n      this.currentpage=pageNumber;\r\n      //数据重新分页\r\n      this.getPageInfo()\r\n    },\r\n    stateFormat(row, column) {\r\n      if (row.level == 0) {\r\n        return ''\r\n      } else if (row.level < 1||row.level==1) {\r\n        return '⭐'\r\n      }else if (row.level < 2||row.level==2) {\r\n        return '⭐⭐'\r\n      } else if (row.level < 3||row.level==3) {\r\n        return '⭐⭐⭐'\r\n      }else if (row.level < 4||row.level==4) {\r\n        return '⭐⭐⭐⭐'\r\n      } else if(row.level<5||row.level==5){\r\n        return '⭐⭐⭐⭐⭐'\r\n      }\r\n    },\r\n  }\r\n}\r\n</script>\r\n\r\n<style scoped lang=\"scss\">\r\n.page{\r\n  height: 96%;\r\n  margin: 1%;\r\n  .div-1{\r\n    position: relative;\r\n    width: 100%;\r\n    height: 70%;\r\n    .left{\r\n      position: absolute;\r\n      width: 60%;\r\n      height: 90%;\r\n      margin-top: 0.8%;\r\n      overflow: hidden;\r\n      .des{\r\n        //position: absolute;\r\n        height: 49%;\r\n        width: 100%;\r\n      }\r\n      .list{\r\n        //position: absolute;\r\n        margin-top: 1%;\r\n        width: 100%;\r\n        height: 60%;\r\n        background-color: white;\r\n        overflow: hidden;\r\n      }\r\n    }\r\n    .right{\r\n      position: absolute;\r\n      background-color: white;\r\n      right: 0;\r\n      width: 39%;\r\n      height: 90%;\r\n      margin-top: 0.8%;\r\n      overflow: auto;\r\n      .calender{\r\n        width: 100%;\r\n        height: 100%;\r\n        font-size: 20px;\r\n      }\r\n    }\r\n  }\r\n  .div-2{\r\n    position: relative;\r\n    width: 100%;\r\n    height: 30%;\r\n    background-color: white;\r\n  }\r\n}\r\n</style>\r\n"]}]}