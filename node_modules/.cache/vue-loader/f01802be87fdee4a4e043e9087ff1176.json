{"remainingRequest":"D:\\project\\softwareDevelopment\\IM-Web\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!D:\\project\\softwareDevelopment\\IM-Web\\src\\views\\admin\\visitor.vue?vue&type=script&lang=js&","dependencies":[{"path":"D:\\project\\softwareDevelopment\\IM-Web\\src\\views\\admin\\visitor.vue","mtime":1649751867532},{"path":"D:\\project\\softwareDevelopment\\IM-Web\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1649851454799},{"path":"D:\\project\\softwareDevelopment\\IM-Web\\node_modules\\babel-loader\\lib\\index.js","mtime":1649851455045},{"path":"D:\\project\\softwareDevelopment\\IM-Web\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1649851454799},{"path":"D:\\project\\softwareDevelopment\\IM-Web\\node_modules\\vue-loader\\lib\\index.js","mtime":1649851455309}],"contextDependencies":[],"result":["//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n\nexport default {\n  data() {\n    return {\n      dictTotal: 0,\n      dictCurrentPage: 1,\n      dictPageSize: 10,\n      tableData: []\n    }\n  },\n  mounted() {\n    this.initData()\n  },\n  methods: {\n    initData() {\n      // this.dictTotal = this.tableData.length\n      this.$http({\n        url: \"/customer/getCustomerList\",\n        method: \"post\",\n        crossdomain: true,\n        body:JSON.stringify({\n\n        })\n      }).then(res => {\n        // console.log(res.data.data);\n        this.dictTotal = res.data.data.length;\n        this.tableData=res.data.data\n      }).catch(err => {\n        console.log(err.data)\n      });\n    },\n    ban(row) {\n      var formName=row\n      if(formName.available==1||formName.available=='') {\n        formName.available = 2\n        console.log(formName)\n        console.log(formName)\n        this.$http({\n          url: \"/customer/updateCustomer\",\n          method: \"post\",\n          crossdomain: true,\n          headers: { 'Content-Type': 'application/json' },\n          body: JSON.stringify(formName)\n        }).then(res => {\n          alert(\"禁用成功\")\n          this.initData();\n        }).catch(err => {\n          console.log(err.data)\n        });\n      }else if(formName.available==2){\n        formName.available = 1\n        console.log(formName)\n        console.log(formName)\n        this.$http({\n          url: \"/customer/updateCustomer\",\n          method: \"post\",\n          crossdomain: true,\n          headers: { 'Content-Type': 'application/json' },\n          body: JSON.stringify(formName)\n        }).then(res => {\n          alert(\"启用成功\")\n          this.initData();\n        }).catch(err => {\n          console.log(err.data)\n        });\n      }\n    },\n    stateFormat(row, column) {\n      // console.log('ces')\n      // if (row.actor === 1) {\n      //   return '投稿人'\n      // } else if (row.actor === 2) {\n      //   return '审稿人'\n      // } else {\n      //   return '管理员'\n      // }\n    },\n    // 设置表头颜色\n    headClass() {\n      return 'background:#e1e9f4;'\n    },\n    // 实时监听查询内容，更新列表\n    onChange(e) {\n      const { value } = e.target\n      console.log('检测到变化' + value)\n      this.$http({\n        url: \"/customer/getCustomerList\",\n        method: \"post\",\n        crossdomain: true,\n        body:JSON.stringify({\n          \"trueName\": value,\n        })\n      }).then(res => {\n        console.log(res.data.data);\n        this.dictTotal = res.data.data.length;\n        this.tableData=res.data.data\n      }).catch(err => {\n        console.log(err.data)\n      });\n    }\n\n  }\n}\n",{"version":3,"sources":["visitor.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAiDA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA","file":"visitor.vue","sourceRoot":"src/views/admin","sourcesContent":["<template>\n  <div class=\"page\">\n    <div class=\"search\">\n      搜索名字\n      <div class=\"item\">\n        <input type=\"text\" style=\"\" placeholder=\"输入名字进行搜索\" @change=\"onChange\"></div>\n    </div>\n    <div class=\"table\">\n      <el-table :data=\"tableData.slice((dictCurrentPage-1)*dictPageSize,dictCurrentPage*dictPageSize)\" style=\"overflow:auto;width:100%;\" height=\"90%\" :header-cell-style=\"headClass\">\n        <!--      <el-table-column prop=\"id\" label=\"编号\" width=\"100px\" />-->\n        <el-table-column prop=\"trueName\" label=\"姓名\" width=\"120px\" fixed />\n        <el-table-column prop=\"gender\" label=\"性别\" width=\"50px\"/>\n        <el-table-column prop=\"registerTime\" label=\"更新时间\" width=\"200px\" align=\"center\"/>\n        <el-table-column prop=\"phone\" label=\"手机号码\" width=\"200px\"/>\n        <el-table-column prop=\"emergencyName\" label=\"紧急联系人\" width=\"220px\"/>\n        <el-table-column prop=\"emergencyNumber\" label=\"紧急联系人电话\" align=\"center\"/>\n        <el-table-column header-align=\"center\" align=\"center\" prop=\"operate\" label=\"操作\" width=\"100px\" fixed=\"right\">\n          <template slot-scope=\"scope\">\n            <el-button\n              v-if=\"scope.row.available==1||scope.row.available==''\"\n              size=\"medium\"\n              style=\"background-color: #b1c0d0\"\n              @click=\"ban(scope.row)\"\n            >禁用\n            </el-button>\n            <el-button\n              v-if=\"scope.row.available==2\"\n              size=\"medium\"\n              style=\"background-color: #b1c0d0\"\n              @click=\"ban(scope.row)\"\n            >启用\n            </el-button>\n          </template>\n        </el-table-column>\n      </el-table>\n      <el-pagination\n        class=\"fy\"\n        layout=\"sizes, prev, pager, next, total\"\n        :current-page.sync=\"dictCurrentPage\"\n        :total=\"dictTotal\"\n        background\n        :page-sizes=\"[10, 20, 30, 40]\"\n        :page-size.sync=\"dictPageSize\"\n      />\n    </div>\n  </div>\n</template>\n\n<script>\nexport default {\n  data() {\n    return {\n      dictTotal: 0,\n      dictCurrentPage: 1,\n      dictPageSize: 10,\n      tableData: []\n    }\n  },\n  mounted() {\n    this.initData()\n  },\n  methods: {\n    initData() {\n      // this.dictTotal = this.tableData.length\n      this.$http({\n        url: \"/customer/getCustomerList\",\n        method: \"post\",\n        crossdomain: true,\n        body:JSON.stringify({\n\n        })\n      }).then(res => {\n        // console.log(res.data.data);\n        this.dictTotal = res.data.data.length;\n        this.tableData=res.data.data\n      }).catch(err => {\n        console.log(err.data)\n      });\n    },\n    ban(row) {\n      var formName=row\n      if(formName.available==1||formName.available=='') {\n        formName.available = 2\n        console.log(formName)\n        console.log(formName)\n        this.$http({\n          url: \"/customer/updateCustomer\",\n          method: \"post\",\n          crossdomain: true,\n          headers: { 'Content-Type': 'application/json' },\n          body: JSON.stringify(formName)\n        }).then(res => {\n          alert(\"禁用成功\")\n          this.initData();\n        }).catch(err => {\n          console.log(err.data)\n        });\n      }else if(formName.available==2){\n        formName.available = 1\n        console.log(formName)\n        console.log(formName)\n        this.$http({\n          url: \"/customer/updateCustomer\",\n          method: \"post\",\n          crossdomain: true,\n          headers: { 'Content-Type': 'application/json' },\n          body: JSON.stringify(formName)\n        }).then(res => {\n          alert(\"启用成功\")\n          this.initData();\n        }).catch(err => {\n          console.log(err.data)\n        });\n      }\n    },\n    stateFormat(row, column) {\n      // console.log('ces')\n      // if (row.actor === 1) {\n      //   return '投稿人'\n      // } else if (row.actor === 2) {\n      //   return '审稿人'\n      // } else {\n      //   return '管理员'\n      // }\n    },\n    // 设置表头颜色\n    headClass() {\n      return 'background:#e1e9f4;'\n    },\n    // 实时监听查询内容，更新列表\n    onChange(e) {\n      const { value } = e.target\n      console.log('检测到变化' + value)\n      this.$http({\n        url: \"/customer/getCustomerList\",\n        method: \"post\",\n        crossdomain: true,\n        body:JSON.stringify({\n          \"trueName\": value,\n        })\n      }).then(res => {\n        console.log(res.data.data);\n        this.dictTotal = res.data.data.length;\n        this.tableData=res.data.data\n      }).catch(err => {\n        console.log(err.data)\n      });\n    }\n\n  }\n}\n</script>\n\n<style lang=\"scss\" scoped>\ninput[type=\"text\"],#btn1,#btn2{\n  box-sizing: border-box;\n  text-align:left;\n  font-size:1em;\n  height:2.5em;\n  border-radius:4px;\n  border:1px solid #c8cccf;\n  color:#6a6f77;\n  -web-kit-appearance:none;\n  -moz-appearance: none;\n  display:block;\n  outline:0;\n  padding:0 1em;\n  text-decoration:none;\n  width:20%;\n}\ninput[type=\"text\"]:focus{\n  border:1px solid #5498e5;\n}\n.page {\n  height: 95%;\n  position: relative;\n  margin-top: 20px;\n  .search{\n    margin-left: 1%;\n    text-align: left;\n    .item{\n        margin-top: 10px;\n        margin-bottom: 10px;\n      }\n    }\n  .table{\n    width: 98%;\n    margin: 0 auto;\n    height: 88%;\n    .fy {\n      height: 10%;\n      position: absolute;\n      margin-top: 20px;\n      right: 10px;\n    }\n  }\n}\n</style>\n"]}]}