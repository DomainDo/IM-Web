{"remainingRequest":"D:\\project\\softwareDevelopment\\IM-Web\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!D:\\project\\softwareDevelopment\\IM-Web\\src\\components\\group-live\\components\\live-player.vue?vue&type=script&lang=js&","dependencies":[{"path":"D:\\project\\softwareDevelopment\\IM-Web\\src\\components\\group-live\\components\\live-player.vue","mtime":1649851412188},{"path":"D:\\project\\softwareDevelopment\\IM-Web\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1649851454799},{"path":"D:\\project\\softwareDevelopment\\IM-Web\\node_modules\\babel-loader\\lib\\index.js","mtime":1649851455045},{"path":"D:\\project\\softwareDevelopment\\IM-Web\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1649851454799},{"path":"D:\\project\\softwareDevelopment\\IM-Web\\node_modules\\vue-loader\\lib\\index.js","mtime":1649851455309}],"contextDependencies":[],"result":["//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n\r\nimport { mapState } from 'vuex'\r\nimport { Slider } from 'element-ui'\r\nimport liveHeader from './live-header'\r\n// import liveShare from './live-share'\r\nimport poster from '../../../assets/image/poster.png'\r\n\r\nexport default {\r\n  name: 'livePlayer',\r\n  data() {\r\n    return {\r\n      player: null,\r\n      isPlaying: true, // 是否正在播放\r\n      volumeValue: 70,\r\n      showSetVolume: false,\r\n      isMute: false,\r\n    }\r\n  },\r\n  computed: {\r\n    ...mapState({\r\n      user: state => state.user,\r\n      roomID: state => state.groupLive.groupLiveInfo.roomID,\r\n      anchorID: state => state.groupLive.groupLiveInfo.anchorID,\r\n    }),\r\n  },\r\n  mounted() {\r\n    this.init()\r\n    const volumeBox = this.$refs.volumeBox\r\n    const progressBox = this.$refs.progressBox\r\n    progressBox.addEventListener('mouseover', () => {\r\n      this.showSetVolume = true\r\n    })\r\n    progressBox.addEventListener('mouseout', () => {\r\n      this.showSetVolume = false\r\n    })\r\n    volumeBox.addEventListener('mouseover', () => {\r\n      this.showSetVolume = true\r\n    })\r\n    volumeBox.addEventListener('mouseout', () => {\r\n      this.showSetVolume = false\r\n    })\r\n  },\r\n  beforeDestroy() {\r\n    this.stopPlay()\r\n  },\r\n  components: {\r\n    liveHeader,\r\n    // liveShare,\r\n    elSlider: Slider\r\n  },\r\n  methods: {\r\n    // 初始化\r\n    init() {\r\n      this.player = this.TWebLive.createPlayer()\r\n      this.player.setCustomConfig({\r\n        autoplay: true,\r\n        poster: { style:'cover', src: poster },\r\n        pausePosterEnabled: false,\r\n        wording: {\r\n          1:'您观看的直播已结束哦~ ',\r\n          2:'您观看的直播已结束哦~ ',\r\n          4:'您观看的直播已结束哦~ ',\r\n          13:'您观看的直播已结束',\r\n          2032: '请求视频失败，请检查网络',\r\n          2048: '请求m3u8文件失败，可能是网络错误或者跨域问题'\r\n        }\r\n      })\r\n      // 播放时\r\n      this.player.on(this.TWebLive.EVENT.PLAYER_PLAYING, this.onPlayerPlaying)\r\n      // 暂停\r\n      this.player.on(this.TWebLive.EVENT.PLAYER_PAUSE, this.onPlayerPause)\r\n      // 浏览器不允许自动播放\r\n      this.player.on(this.TWebLive.EVENT.PLAYER_AUTOPLAY_NOT_ALLOWED, this.onPlayerAutoPlayNotAllowed)\r\n      this.player.on(this.TWebLive.EVENT.PLAYER_ERROR, this.onPlayerError)\r\n      this.setRenderView()\r\n      this.$bus.$emit('join-group-live-avchatroom')\r\n    },\r\n    // eslint-disable-next-line no-unused-vars\r\n    onPlayerPlaying(event) {},\r\n    // eslint-disable-next-line no-unused-vars\r\n    onPlayerPause(event) {},\r\n    // eslint-disable-next-line no-unused-vars\r\n    onPlayerAutoPlayNotAllowed(event) {\r\n      this.$store.commit('showMessage', {\r\n        message: '不能自动播放',\r\n        type: 'info'\r\n      })\r\n    },\r\n    // eslint-disable-next-line no-unused-vars\r\n    onPlayerError(event) {},\r\n    // 设置渲染界面\r\n    setRenderView() {\r\n      this.player.setRenderView({ elementID: 'player-container' })\r\n      this.startPlay()\r\n    },\r\n    //开始播放\r\n    startPlay() {\r\n      const streamID = `${this.user.sdkAppID}_${this.roomID}_${this.anchorID}_main`\r\n      const flv = `https://tuikit.qcloud.com/live/${streamID}.flv`\r\n      const hls = `https://tuikit.qcloud.com/live/${streamID}.m3u8` \r\n      const url = `https://flv=${encodeURIComponent(flv)}&hls=${encodeURIComponent(hls)}`\r\n      this.player.startPlay(url).then(() => {\r\n        this.isPlaying = true\r\n      }).catch(() => {})\r\n    },\r\n    resumeAudio() {\r\n      this.player.resumeAudio().then(() => {\r\n        this.isMute = false\r\n      }).catch(() => {})\r\n    },\r\n    pauseAudio() {\r\n      this.player.pauseAudio().then(() => {\r\n        this.isMute = true\r\n      }).catch(() => {})\r\n    },\r\n    //暂停播放\r\n    pauseVideo() {\r\n      this.player.pauseVideo().then(() => {\r\n        this.isPlaying = false\r\n      }).catch(() => {})\r\n    },\r\n    // 恢复播放\r\n    resumeVideo() {\r\n      this.player.resumeVideo().then(() => {\r\n        this.isPlaying = true\r\n      }).catch(() => {})\r\n    },\r\n    setPlayoutVolume() {\r\n      this.player.setPlayoutVolume(this.volumeValue)\r\n    },\r\n    // 停止播放\r\n    stopPlay() {\r\n      this.player.stopPlay()\r\n      this.isPlaying = false\r\n    },\r\n  }\r\n}\r\n",{"version":3,"sources":["live-player.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA0CA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"live-player.vue","sourceRoot":"src/components/group-live/components","sourcesContent":["<template>\r\n  <div class=\"player\">\r\n    <div class=\"header-bar\">\r\n      <live-header  fr=\"player\" />\r\n    </div>\r\n    <div id=\"player-container\" class=\"video-container\">\r\n      <div style=\"position: absolute\">\r\n        <img src=\"../../../assets/image/no-video.png\">\r\n        <p style=\"font-size: 24px;color: #8A9099;text-align: center;margin-top: 30px\">暂无画面</p>\r\n      </div>\r\n    </div>\r\n    <div class=\"setting-bar\">\r\n      <!-- <live-share /> -->\r\n      <div>\r\n        <div class=\"player-start cursor\" v-if=\"!isPlaying\" @click=\"resumeVideo\">\r\n          <img class=\"player-icon\" src=\"../../../assets/image/web-pusher-start.png\">\r\n          <span class=\"play-text\">观看直播</span>\r\n        </div>\r\n        <div class=\"player-start cursor\" v-else @click=\"pauseVideo\">\r\n          <img class=\"player-icon\" src=\"../../../assets/image/pause-icon.png\">\r\n          <span class=\"play-text\">暂停观看</span>\r\n        </div>\r\n      </div>\r\n      <div class=\"volume-box\" ref=\"volumeBox\">\r\n        <p class=\"setting-icon cursor \" @click=\"setPlayoutVolume\">\r\n          <svg width=\"16\" height=\"16\" viewBox=\"0 0 16 16\" fill=\"none\" xmlns=\"http://www.w3.org/2000/svg\">\r\n            <mask id=\"path-1-inside-1\" fill=\"white\">\r\n              <path fill-rule=\"evenodd\" clip-rule=\"evenodd\" d=\"M4.18171 12H0V4H4.19181L8 0.831913L9 0V1.3008V14.7003V16L8 15.1698L4.18171 12ZM5 4.62845L8 2.13271V13.8701L5 11.3796V4.62845Z\"/>\r\n            </mask>\r\n            <path d=\"M0 12V14H-2V12H0ZM4.18171 12V10H4.9037L5.45921 10.4612L4.18171 12ZM0 4H-2V2H0V4ZM4.19181 4L5.47089 5.53752L4.91496 6H4.19181V4ZM8 0.831913L6.72092 -0.705603V-0.705603L8 0.831913ZM9 0L7.72092 -1.53752L11 -4.26543V0H9ZM9 16H11V20.2597L7.72251 17.5388L9 16ZM8 15.1698L9.27749 13.631H9.27749L8 15.1698ZM5 4.62845H3V3.69068L3.72092 3.09094L5 4.62845ZM8 2.13271L6.72092 0.595197L10 -2.13271V2.13271H8ZM8 13.8701H10V18.1299L6.72251 15.409L8 13.8701ZM5 11.3796L3.72251 12.9185L3 12.3187V11.3796H5ZM0 10H4.18171V14H0V10ZM2 4V12H-2V4H2ZM4.19181 6H0V2H4.19181V6ZM2.91273 2.46248L6.72092 -0.705603L9.27908 2.36943L5.47089 5.53752L2.91273 2.46248ZM6.72092 -0.705603L7.72092 -1.53752L10.2791 1.53752L9.27908 2.36943L6.72092 -0.705603ZM11 0V1.3008H7V0H11ZM11 1.3008V14.7003H7V1.3008H11ZM11 14.7003V16H7V14.7003H11ZM7.72251 17.5388L6.72251 16.7087L9.27749 13.631L10.2775 14.4612L7.72251 17.5388ZM6.72251 16.7087L2.90422 13.5388L5.45921 10.4612L9.27749 13.631L6.72251 16.7087ZM3.72092 3.09094L6.72092 0.595197L9.27908 3.67023L6.27908 6.16597L3.72092 3.09094ZM10 2.13271V13.8701H6V2.13271H10ZM6.72251 15.409L3.72251 12.9185L6.27749 9.8408L9.27749 12.3313L6.72251 15.409ZM3 11.3796V4.62845H7V11.3796H3Z\" fill=\"#8A9099\" mask=\"url(#path-1-inside-1)\"/>\r\n            <path fill-rule=\"evenodd\" clip-rule=\"evenodd\" d=\"M11.6088 13.9991C13.9991 13.0388 15.6868 10.6992 15.6868 7.9654C15.6868 5.24314 14.0133 2.91174 11.639 1.94385L10.9332 3.81684C12.5511 4.49874 13.6868 6.09944 13.6868 7.9654C13.6868 9.84413 12.5355 11.454 10.8999 12.1278L11.6088 13.9991Z\" fill=\"#8A9099\"/>\r\n          </svg>\r\n          <span class=\"mic-text\">声音</span>\r\n        </p>\r\n        <span class=\"progress-box\" ref=\"progressBox\" v-show=\"showSetVolume\">\r\n          <el-slider vertical height=\"200px\" @change=\"setPlayoutVolume\" v-model=\"volumeValue\"></el-slider>\r\n        </span>\r\n      </div>\r\n    </div>\r\n  </div>\r\n</template>\r\n<script>\r\nimport { mapState } from 'vuex'\r\nimport { Slider } from 'element-ui'\r\nimport liveHeader from './live-header'\r\n// import liveShare from './live-share'\r\nimport poster from '../../../assets/image/poster.png'\r\n\r\nexport default {\r\n  name: 'livePlayer',\r\n  data() {\r\n    return {\r\n      player: null,\r\n      isPlaying: true, // 是否正在播放\r\n      volumeValue: 70,\r\n      showSetVolume: false,\r\n      isMute: false,\r\n    }\r\n  },\r\n  computed: {\r\n    ...mapState({\r\n      user: state => state.user,\r\n      roomID: state => state.groupLive.groupLiveInfo.roomID,\r\n      anchorID: state => state.groupLive.groupLiveInfo.anchorID,\r\n    }),\r\n  },\r\n  mounted() {\r\n    this.init()\r\n    const volumeBox = this.$refs.volumeBox\r\n    const progressBox = this.$refs.progressBox\r\n    progressBox.addEventListener('mouseover', () => {\r\n      this.showSetVolume = true\r\n    })\r\n    progressBox.addEventListener('mouseout', () => {\r\n      this.showSetVolume = false\r\n    })\r\n    volumeBox.addEventListener('mouseover', () => {\r\n      this.showSetVolume = true\r\n    })\r\n    volumeBox.addEventListener('mouseout', () => {\r\n      this.showSetVolume = false\r\n    })\r\n  },\r\n  beforeDestroy() {\r\n    this.stopPlay()\r\n  },\r\n  components: {\r\n    liveHeader,\r\n    // liveShare,\r\n    elSlider: Slider\r\n  },\r\n  methods: {\r\n    // 初始化\r\n    init() {\r\n      this.player = this.TWebLive.createPlayer()\r\n      this.player.setCustomConfig({\r\n        autoplay: true,\r\n        poster: { style:'cover', src: poster },\r\n        pausePosterEnabled: false,\r\n        wording: {\r\n          1:'您观看的直播已结束哦~ ',\r\n          2:'您观看的直播已结束哦~ ',\r\n          4:'您观看的直播已结束哦~ ',\r\n          13:'您观看的直播已结束',\r\n          2032: '请求视频失败，请检查网络',\r\n          2048: '请求m3u8文件失败，可能是网络错误或者跨域问题'\r\n        }\r\n      })\r\n      // 播放时\r\n      this.player.on(this.TWebLive.EVENT.PLAYER_PLAYING, this.onPlayerPlaying)\r\n      // 暂停\r\n      this.player.on(this.TWebLive.EVENT.PLAYER_PAUSE, this.onPlayerPause)\r\n      // 浏览器不允许自动播放\r\n      this.player.on(this.TWebLive.EVENT.PLAYER_AUTOPLAY_NOT_ALLOWED, this.onPlayerAutoPlayNotAllowed)\r\n      this.player.on(this.TWebLive.EVENT.PLAYER_ERROR, this.onPlayerError)\r\n      this.setRenderView()\r\n      this.$bus.$emit('join-group-live-avchatroom')\r\n    },\r\n    // eslint-disable-next-line no-unused-vars\r\n    onPlayerPlaying(event) {},\r\n    // eslint-disable-next-line no-unused-vars\r\n    onPlayerPause(event) {},\r\n    // eslint-disable-next-line no-unused-vars\r\n    onPlayerAutoPlayNotAllowed(event) {\r\n      this.$store.commit('showMessage', {\r\n        message: '不能自动播放',\r\n        type: 'info'\r\n      })\r\n    },\r\n    // eslint-disable-next-line no-unused-vars\r\n    onPlayerError(event) {},\r\n    // 设置渲染界面\r\n    setRenderView() {\r\n      this.player.setRenderView({ elementID: 'player-container' })\r\n      this.startPlay()\r\n    },\r\n    //开始播放\r\n    startPlay() {\r\n      const streamID = `${this.user.sdkAppID}_${this.roomID}_${this.anchorID}_main`\r\n      const flv = `https://tuikit.qcloud.com/live/${streamID}.flv`\r\n      const hls = `https://tuikit.qcloud.com/live/${streamID}.m3u8` \r\n      const url = `https://flv=${encodeURIComponent(flv)}&hls=${encodeURIComponent(hls)}`\r\n      this.player.startPlay(url).then(() => {\r\n        this.isPlaying = true\r\n      }).catch(() => {})\r\n    },\r\n    resumeAudio() {\r\n      this.player.resumeAudio().then(() => {\r\n        this.isMute = false\r\n      }).catch(() => {})\r\n    },\r\n    pauseAudio() {\r\n      this.player.pauseAudio().then(() => {\r\n        this.isMute = true\r\n      }).catch(() => {})\r\n    },\r\n    //暂停播放\r\n    pauseVideo() {\r\n      this.player.pauseVideo().then(() => {\r\n        this.isPlaying = false\r\n      }).catch(() => {})\r\n    },\r\n    // 恢复播放\r\n    resumeVideo() {\r\n      this.player.resumeVideo().then(() => {\r\n        this.isPlaying = true\r\n      }).catch(() => {})\r\n    },\r\n    setPlayoutVolume() {\r\n      this.player.setPlayoutVolume(this.volumeValue)\r\n    },\r\n    // 停止播放\r\n    stopPlay() {\r\n      this.player.stopPlay()\r\n      this.isPlaying = false\r\n    },\r\n  }\r\n}\r\n</script>\r\n<style  lang=\"stylus\">\r\n.vcp-controls-panel {\r\n  display none\r\n}\r\n.el-slider__bar {\r\n  background #5cadff !important\r\n}\r\n.el-slider__button {\r\n  border hidden\r\n}\r\n</style>\r\n<style lang=\"stylus\" scoped>\r\n  .cursor {\r\n    cursor: pointer;\r\n  }\r\n  .active {\r\n    color: #2d8cf0\r\n  }\r\n  .setting-icon {\r\n    display flex\r\n    justify-content center\r\n    align-items center\r\n    height 40px\r\n    margin 0 10px\r\n  }\r\n  .player {\r\n    position relative\r\n    width 99.9%\r\n    height 100%\r\n    display flex\r\n    flex-flow column\r\n    .video-container {\r\n      position relative\r\n      display flex\r\n      flex-direction column\r\n      justify-content center\r\n      align-items center\r\n      flex 1\r\n      background rgba(0, 0, 0, 0.3)\r\n      .stop-camera {\r\n        position absolute\r\n        top 0\r\n        right 0\r\n        bottom 0\r\n        left 0\r\n        background-color #ffffff\r\n        display flex\r\n        flex-direction column\r\n        justify-content center\r\n        align-items center\r\n      }\r\n    }\r\n    .header-bar {\r\n      position: relative;\r\n      width 100%\r\n      height 70px\r\n      background-color #363e47\r\n      padding 10px 10px 10px 20px\r\n    }\r\n    .setting-bar {\r\n      position: relative;\r\n      bottom 0\r\n      width 100%\r\n      height 55px\r\n      background-color #363e47\r\n      .player-time{\r\n        position: absolute;\r\n        bottom 0\r\n        left 15px\r\n        width 100%\r\n        line-height 60px\r\n        font-size: 14px;\r\n        color: #D2DAE6;\r\n        letter-spacing: 0;\r\n      }\r\n      .player-start {\r\n        position: absolute;\r\n        right 0\r\n        bottom 0\r\n        width 210px\r\n        height 55px\r\n        background #5cadff\r\n        display: flex;\r\n        justify-content: center;\r\n        align-items: center;\r\n      }\r\n      .player-mic{\r\n        position: absolute;\r\n        right 260px\r\n        bottom 0\r\n        /*width 210px*/\r\n        height 55px\r\n        display: flex;\r\n        justify-content: center;\r\n        align-items: center\r\n        padding 0 10px\r\n      }\r\n      .play-text{\r\n        font-size 16px\r\n        color #ffffff\r\n        margin-left 5px\r\n      }\r\n      .player-icon{\r\n        width 14px\r\n        height 14px\r\n      }\r\n      .mic-text{\r\n        font-size 14px\r\n        color #8A9099\r\n        margin-left 5px\r\n      }\r\n    }\r\n    .volume-box {\r\n      position absolute\r\n      right 220px\r\n      bottom 8px\r\n      .progress-box {\r\n        padding 4px 0\r\n        position absolute\r\n        bottom 35px\r\n        right 32px\r\n      }\r\n    }\r\n    /deep/ .vcp-player video {\r\n      position absolute\r\n      top 0\r\n      left 0\r\n      width 100% !important\r\n      height 100% !important\r\n      object-fit cover\r\n    }\r\n\r\n    /deep/ .vcp-player {\r\n      width 100% !important\r\n      height 100% !important\r\n      position: relative;\r\n      display: flex;\r\n      justify-content: center;\r\n      align-items: center;\r\n      background-color:rgba(0,0,0,0)\r\n    }\r\n\r\n    /deep/ .vcp-bigplay {\r\n      display none\r\n    }\r\n\r\n    /deep/ .vcp-error-tips {\r\n      color #FFFFFF\r\n      margin-top: -8.25em\r\n    }\r\n  }\r\n</style>\r\n"]}]}